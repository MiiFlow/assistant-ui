'use strict';var chunk6X3SYLST_js=require('./chunk-6X3SYLST.js'),react=require('react'),clsx=require('clsx'),tailwindMerge=require('tailwind-merge'),jsxRuntime=require('react/jsx-runtime'),lucideReact=require('lucide-react'),Ye=require('react-markdown'),Ze=require('remark-gfm');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var Ye__default=/*#__PURE__*/_interopDefault(Ye);var Ze__default=/*#__PURE__*/_interopDefault(Ze);function r(...e){return tailwindMerge.twMerge(clsx.clsx(e))}var Ne=react.forwardRef(({children:e,className:a,...t},o)=>jsxRuntime.jsx("div",{ref:o,className:r("flex flex-col h-full","bg-white dark:bg-gray-900","font-sans text-chat-text",a),...t,children:e}));Ne.displayName="ChatContainer";var we=react.forwardRef(({children:e,autoScroll:a=true,className:t},o)=>jsxRuntime.jsx(chunk6X3SYLST_js.f,{ref:o,autoScroll:a,className:r("flex-1 overflow-y-auto","flex flex-col gap-4 p-4","chat-scrollbar",t),children:e}));we.displayName="MessageList";var Ke={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"},Je={sm:14,md:16,lg:20};function Qe(e,a){let t=Je[a];switch(e){case "assistant":return jsxRuntime.jsx(lucideReact.Bot,{size:t});case "user":return jsxRuntime.jsx(lucideReact.User,{size:t});default:return jsxRuntime.jsx(lucideReact.User,{size:t})}}var H=react.forwardRef(({name:e,src:a,alt:t,role:o,size:n="md",className:s,...f},c)=>jsxRuntime.jsx(chunk6X3SYLST_js.l,{ref:c,name:e,src:a,alt:t,role:o,className:r("rounded-full overflow-hidden flex-shrink-0","flex items-center justify-center","font-medium",o==="assistant"?"bg-primary/10 text-primary":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300",Ke[n],s),fallback:Qe(o,n),...f}));H.displayName="Avatar";function S({children:e,className:a}){return jsxRuntime.jsx(Ye__default.default,{className:r("chat-prose",a),remarkPlugins:[Ze__default.default],components:{h1:({children:t})=>jsxRuntime.jsx("h1",{className:"text-2xl font-semibold mt-4 mb-2 first:mt-0",children:t}),h2:({children:t})=>jsxRuntime.jsx("h2",{className:"text-xl font-semibold mt-3 mb-2 first:mt-0",children:t}),h3:({children:t})=>jsxRuntime.jsx("h3",{className:"text-lg font-medium mt-2 mb-1 first:mt-0",children:t}),h4:({children:t})=>jsxRuntime.jsx("h4",{className:"text-base font-medium mt-2 mb-1 first:mt-0",children:t}),p:({children:t})=>jsxRuntime.jsx("p",{className:"mb-2 last:mb-0 leading-relaxed",children:t}),a:({href:t,children:o})=>jsxRuntime.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:opacity-80 transition-opacity",children:o}),ul:({children:t})=>jsxRuntime.jsx("ul",{className:"list-disc pl-4 mb-2 space-y-1",children:t}),ol:({children:t})=>jsxRuntime.jsx("ol",{className:"list-decimal pl-4 mb-2 space-y-1",children:t}),li:({children:t})=>jsxRuntime.jsx("li",{className:"leading-relaxed",children:t}),blockquote:({children:t})=>jsxRuntime.jsx("blockquote",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-3 my-2 italic text-chat-subtle",children:t}),code:({className:t,children:o})=>t?jsxRuntime.jsx("code",{className:"block text-sm font-mono",children:o}):jsxRuntime.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono",children:o}),pre:({children:t})=>jsxRuntime.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg overflow-x-auto text-sm my-2",children:t}),table:({children:t})=>jsxRuntime.jsx("div",{className:"overflow-x-auto my-2 rounded-lg border border-gray-200 dark:border-gray-700",children:jsxRuntime.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:t})}),thead:({children:t})=>jsxRuntime.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t}),th:({children:t})=>jsxRuntime.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),td:({children:t})=>jsxRuntime.jsx("td",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700",children:t}),hr:()=>jsxRuntime.jsx("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),strong:({children:t})=>jsxRuntime.jsx("strong",{className:"font-semibold",children:t}),em:({children:t})=>jsxRuntime.jsx("em",{className:"italic",children:t}),img:({src:t,alt:o})=>jsxRuntime.jsx("img",{src:t,alt:o??"",className:"max-w-full h-auto rounded-lg my-2",loading:"lazy"})},children:e})}var et={small:"w-1.5 h-1.5",medium:"w-2 h-2",large:"w-2.5 h-2.5"},tt={small:"gap-1",medium:"gap-1.5",large:"gap-2"};function Z({size:e="medium",className:a}){let t=et[e];return jsxRuntime.jsxs("div",{className:r("flex items-center",tt[e],a),children:[jsxRuntime.jsx("div",{className:r(t,"rounded-full bg-[var(--chat-text-subtle)]","animate-loading-dot animate-loading-dot-1")}),jsxRuntime.jsx("div",{className:r(t,"rounded-full bg-[var(--chat-text-subtle)]","animate-loading-dot animate-loading-dot-2")}),jsxRuntime.jsx("div",{className:r(t,"rounded-full bg-[var(--chat-text-subtle)]","animate-loading-dot animate-loading-dot-3")})]})}function j({status:e,size:a=16,className:t}){let o={size:a,strokeWidth:2};return jsxRuntime.jsxs("div",{className:r("relative flex-shrink-0",t),style:{width:a,height:a},children:[e==="pending"&&jsxRuntime.jsx(lucideReact.CircleDashed,{...o,className:"text-[var(--chat-text-subtle)] opacity-40"}),e==="running"&&jsxRuntime.jsx(lucideReact.Loader2,{...o,className:"text-[var(--chat-text-subtle)] animate-spin"}),e==="completed"&&jsxRuntime.jsx(lucideReact.CircleCheck,{...o,className:"text-[var(--chat-text-subtle)]"}),e==="failed"&&jsxRuntime.jsx(lucideReact.CircleX,{...o,className:"text-red-500"})]})}function F({items:e,badgeSize:a=20,className:t}){return e.length===0?null:jsxRuntime.jsx("div",{className:r("max-w-full",t),children:jsxRuntime.jsx("div",{className:"flex flex-col",children:e.map((o,n)=>{let s=n===e.length-1,f=!s&&e[n+1]?.status==="pending";return jsxRuntime.jsxs("div",{className:"animate-fade-in",style:{display:"grid",gridTemplateColumns:`${a}px 1fr`,gap:"0.5rem",paddingBottom:s?0:"0.5rem",position:"relative"},children:[jsxRuntime.jsxs("div",{className:"relative flex flex-col items-center flex-shrink-0",style:{paddingTop:"4px"},children:[jsxRuntime.jsx(j,{status:o.status,size:a}),!s&&jsxRuntime.jsx("div",{className:"absolute left-1/2 -translate-x-1/2",style:{top:a+6,height:`calc(100% - ${a}px + 4px)`,width:0,borderLeft:"2px",borderStyle:f?"dashed":"solid",borderColor:"var(--chat-border)",zIndex:1}})]}),jsxRuntime.jsx("div",{className:"min-w-0 flex-1 flex items-center",children:o.content})]},o.id)})})})}function lt({status:e,isLast:a=false,badgeSize:t=16,children:o,className:n}){return jsxRuntime.jsxs("div",{className:r("relative flex items-start gap-3 animate-fade-in",!a&&"pb-3",n),children:[jsxRuntime.jsxs("div",{className:"relative flex-shrink-0 pt-0.5",children:[jsxRuntime.jsx(j,{status:e,size:t}),!a&&jsxRuntime.jsx("div",{className:"absolute bg-[var(--chat-border)] opacity-30",style:{left:t/2-.5,top:t+4,height:"calc(100% + 12px)",width:1,zIndex:1}})]}),jsxRuntime.jsx("div",{className:"min-w-0 flex-1",children:o})]})}function te({event:e,className:a}){if(e.type==="thinking")return jsxRuntime.jsx("div",{className:r("p-1 rounded transition-colors","bg-black/[0.01] hover:bg-black/[0.02]",a),children:jsxRuntime.jsx("div",{className:"text-[var(--chat-text-subtle)] text-sm leading-relaxed",children:jsxRuntime.jsx(S,{children:e.content})})});if(e.type==="planning")return jsxRuntime.jsx("div",{className:r("p-1 rounded transition-colors","bg-black/[0.01] hover:bg-black/[0.02]",a),children:jsxRuntime.jsx("div",{className:"text-[var(--chat-text-subtle)] text-sm leading-relaxed",children:jsxRuntime.jsx(S,{children:e.content})})});if(e.type==="tool")return jsxRuntime.jsxs("div",{className:r("inline-flex items-center gap-1 px-2 py-0.5","border border-[var(--chat-border)] rounded","bg-white",a),children:[jsxRuntime.jsx(lucideReact.Wrench,{size:14,className:"text-[var(--chat-text-subtle)]"}),jsxRuntime.jsx("span",{className:"text-sm text-[var(--chat-text)]",children:e.toolDescription||e.toolName})]});if(e.type==="observation"){let t=e.success!==false;return jsxRuntime.jsxs("div",{className:r("px-3 py-1.5 rounded max-w-full overflow-auto",t?"bg-green-50 border-l-[3px] border-green-400":"bg-yellow-50 border-l-[3px] border-yellow-400",a),children:[jsxRuntime.jsxs("span",{className:r("text-xs font-semibold uppercase tracking-wide block mb-1",t?"text-green-700":"text-yellow-700"),children:[e.toolName," Result"]}),jsxRuntime.jsx("div",{className:r("text-sm",t?"text-green-900":"text-yellow-900"),children:jsxRuntime.jsx(S,{children:e.content})})]})}return null}var ct=["create_plan","unknown"];function ke(e){return e?ct.includes(e.toLowerCase().trim()):false}function ae(e,a){if(e.toolName&&ke(e.toolName))return null;if(e.type==="thinking")return !e.content||e.content.trim().length===0?null:{id:`thinking-${a}`,type:"thinking",status:"completed",content:e.content};if(e.type==="planning"){if(!e.content||e.content.trim().length===0)return null;let t=e.planData!==void 0||e.content.includes("\u2713 Created plan");return {id:`planning-${a}`,type:"planning",status:t?"completed":"running",content:e.content,isComplete:t}}if(e.type==="tool"){let t=e.status==="executing"?"running":e.status==="completed"?"completed":"pending";return {id:`tool-${a}`,type:"tool",status:t,toolName:e.toolName||"Unknown Tool",toolDescription:e.toolDescription}}return null}function dt(e){let a=[];return e.forEach((t,o)=>{if(t.type==="thought"){let n=t.thought;if(!n||n.trim().length===0)return;a.push({id:`thought-${o}`,type:"thinking",status:"completed",content:n});}else if(t.type==="tool"){let n=t.tool||"Unknown Tool";if(ke(n))return;a.push({id:`tool-${o}`,type:"tool",status:"completed",toolName:n,toolDescription:t.tool_description});}}),a}function _({events:e,className:a}){if(e.length===0)return null;let t=e.map(o=>({id:o.id,status:o.status,content:jsxRuntime.jsx(te,{event:o})}));return jsxRuntime.jsx(F,{items:t,badgeSize:20,className:a})}function gt(e){let a=[];return e.forEach((t,o)=>{if(t.type==="thinking"){if(!t.content||t.content.trim().length===0)return;a.push({id:`thinking-${o}`,type:"thinking",status:"completed",content:t.content});}else if(t.type==="tool"){let n=t.status==="executing"?"running":t.status==="completed"?"completed":"pending";a.push({id:`tool-${o}`,type:"tool",status:n,toolName:t.toolName||"Unknown Tool",toolDescription:t.toolDescription});}}),a}function vt({subtask:e,executionChunks:a=[]}){let[t,o]=react.useState(e.status==="running");e.status==="running"&&!t&&o(true);let n=a.length>0,s=gt(a);return jsxRuntime.jsx("div",{className:"flex-1 min-w-0",children:jsxRuntime.jsxs("div",{onClick:()=>n&&o(!t),className:r("flex flex-col p-3 rounded","bg-black/[0.01] border border-[var(--chat-border)]","transition-colors",n&&"cursor-pointer hover:bg-black/[0.02] hover:border-black/[0.12]"),children:[jsxRuntime.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntime.jsxs("div",{className:"flex items-start justify-between gap-1",children:[jsxRuntime.jsx("span",{className:"text-sm font-medium text-[var(--chat-text)] leading-snug",children:e.description}),n&&jsxRuntime.jsx("button",{onClick:f=>{f.stopPropagation(),o(!t);},className:"flex-shrink-0 p-0.5",children:t?jsxRuntime.jsx(lucideReact.ChevronUp,{size:14,className:"text-[var(--chat-text-subtle)]"}):jsxRuntime.jsx(lucideReact.ChevronDown,{size:14,className:"text-[var(--chat-text-subtle)]"})})]}),jsxRuntime.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.status==="completed"&&e.execution_time&&jsxRuntime.jsxs("span",{className:"text-xs text-[var(--chat-text-subtle)] font-medium",children:["Completed in ",e.execution_time.toFixed(2),"s"]}),e.status==="failed"&&e.error&&jsxRuntime.jsx("span",{className:"text-xs text-red-600 font-medium",children:e.error})]})]}),n&&t&&jsxRuntime.jsx("div",{className:"mt-3 pl-2 border-l-2 border-[var(--chat-border)]",children:jsxRuntime.jsx(_,{events:s})})]})})}function re({plan:e,streamingChunks:a=[],className:t}){let o=e.completed_subtasks||0,n=e.total_subtasks||e.subtasks.length,s=e.progress_percentage||o/n*100,f=e.subtasks.map(c=>{let l=a.filter(h=>h.subtaskId===c.id),d=c.status==="running"?"running":c.status==="completed"?"completed":c.status==="failed"?"failed":"pending";return {id:String(c.id),status:d,content:jsxRuntime.jsx(vt,{subtask:c,executionChunks:l})}});return jsxRuntime.jsxs("div",{className:r("space-y-3",t),children:[jsxRuntime.jsxs("div",{className:"text-sm font-medium leading-snug",children:["Plan: ",o,"/",n," completed (",Math.round(s),"%)"]}),jsxRuntime.jsx(F,{items:f,badgeSize:24})]})}function Ct(e){return e<1?`${Math.round(e*1e3)}ms`:`${e.toFixed(1)}s`}function ne({isStreaming:e=false,chunks:a=[],plan:t,executionTime:o,defaultExpanded:n=false,expanded:s,onExpandedChange:f,className:c}){let[l,d]=react.useState(n),h=s??l,A=v=>{d(v),f?.(v);},p=react.useMemo(()=>e?a.map((v,N)=>ae(v,N)).filter(v=>v!==null):[],[e,a]),x=react.useMemo(()=>{if(!e)return null;let v=a.find(w=>w.planData!==void 0);if(!v?.planData)return null;let N={...v.planData},U=[...N.subtasks||[]],J=0,le=0;return a.forEach(w=>{if(w.type==="subtask"&&w.subtaskId!==void 0){let Q=U.findIndex(M=>M.id===w.subtaskId);if(Q!==-1){let M={...U[Q]};if(w.content.includes("\u2713 Completed"))M.status="completed",w.subtaskData?.execution_time&&(M.execution_time=w.subtaskData.execution_time),J++;else if(w.content.includes("\u2717 Failed")){M.status="failed";let me=w.content.match(/âœ— Failed: (.*)/);me&&(M.error=me[1]),le++;}else w.content.includes("\u2192 **Subtask")&&(M.status="running");U[Q]=M;}}}),N.subtasks=U,N.completed_subtasks=J,N.failed_subtasks=le,N.progress_percentage=J/N.total_subtasks*100,N},[e,a]),y=react.useMemo(()=>!e&&t?.subtasks?t.subtasks.reduce((v,N)=>v+(N.execution_time||0),0):o||0,[e,t,o]);if(!e&&a.length===0&&!t)return null;let g=a.length>0?a[a.length-1]:null,z=g?.type==="tool"||g?.toolName,$=g?.type==="planning",D=()=>{if(!e&&y>0)return `Thought for ${Ct(y)}`;if(g?.toolDescription)return g.toolDescription;if(g?.toolName)return g.toolName;switch(g?.type){case "planning":return "Planning...";case "thinking":return "Thinking...";case "tool":return g.toolName||"Using tool...";case "subtask":return `Executing subtask ${g.subtaskId||""}...`;default:return "Processing..."}},_e=()=>z?jsxRuntime.jsx(lucideReact.Wrench,{size:14}):$?jsxRuntime.jsx(lucideReact.ListTodo,{size:14}):jsxRuntime.jsx(lucideReact.Sparkle,{size:14}),Be=v=>v?.subtasks?v.subtasks.length>=2:false,K=e?x:t,$e=Be(K);return jsxRuntime.jsxs("div",{className:r("max-w-full",c),children:[jsxRuntime.jsxs("button",{onClick:()=>A(!h),className:r("inline-flex items-center gap-1.5 px-3 py-1.5","text-sm rounded-full","bg-[var(--chat-panel-bg)] text-[var(--chat-text-subtle)]","hover:bg-[var(--chat-panel-border)]","transition-all duration-200","cursor-pointer",e&&"relative overflow-hidden",!e&&"opacity-60 hover:opacity-100"),children:[e&&jsxRuntime.jsx("div",{className:"absolute inset-0 animate-scanning bg-gradient-to-r from-transparent via-white/30 to-transparent"}),jsxRuntime.jsx("span",{className:"text-[var(--chat-text-subtle)] relative z-10",children:_e()}),jsxRuntime.jsx("span",{className:"relative z-10",children:D()}),jsxRuntime.jsx("span",{className:"relative z-10 text-[var(--chat-text-subtle)]",children:h?jsxRuntime.jsx(lucideReact.ChevronUp,{size:14}):jsxRuntime.jsx(lucideReact.ChevronDown,{size:14})})]}),h&&jsxRuntime.jsx("div",{className:"mt-3 animate-fade-in",children:$e&&K?jsxRuntime.jsx(re,{plan:K,streamingChunks:a}):jsxRuntime.jsx(_,{events:p})})]})}var q=react.forwardRef(({actions:e,onSelect:a,className:t},o)=>e.length===0?null:jsxRuntime.jsx(chunk6X3SYLST_js.p,{ref:o,actions:e,onSelect:a||(()=>{}),className:r("flex flex-wrap gap-2",t),children:e.map(s=>jsxRuntime.jsx(chunk6X3SYLST_js.q,{action:s,className:r("px-3 py-1.5 rounded-button","text-sm font-medium","border border-chat-border","bg-white dark:bg-gray-800","text-chat-text","hover:border-chat-border-hover hover:bg-chat-panel-bg","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary/20")},s.id))}));q.displayName="SuggestedActions";var Ee=react.forwardRef(({message:e,viewerRole:a="user",className:t,showAvatar:o=true,showTimestamp:n=true,renderMarkdown:s=true,reasoning:f,suggestedActions:c,onSuggestedAction:l,reasoningExpanded:d,onReasoningExpandedChange:h},A)=>{let p=e.participant?.role===a,x=e.participant?.role==="assistant",y=e.isStreaming,g=f?.filter(D=>D.type==="thinking"||D.type==="tool"||D.type==="observation"||D.type==="planning"||D.type==="subtask"),z=g&&g.length>0,$=y&&!e.textContent&&!z;return jsxRuntime.jsx(chunk6X3SYLST_js.c,{ref:A,message:e,viewerRole:a,className:r("w-full animate-fade-in",t),children:jsxRuntime.jsxs("div",{className:"grid items-start gap-x-2 gap-y-1",style:{gridTemplateColumns:p?"1fr auto":"auto 1fr"},children:[$&&jsxRuntime.jsx("div",{className:r("max-w-[80%]",p?"col-start-1 justify-self-end":"col-start-2 justify-self-start"),children:jsxRuntime.jsx("div",{className:r("px-4 py-3 rounded-lg","bg-[var(--chat-message-bg)] border border-[var(--chat-border)]"),children:jsxRuntime.jsx(Z,{size:"small"})})}),z&&x&&jsxRuntime.jsx("div",{className:r("max-w-[80%]",p?"col-start-1 justify-self-end":"col-start-2 justify-self-start"),children:jsxRuntime.jsx(ne,{isStreaming:y,chunks:g,expanded:d,onExpandedChange:h})}),o&&!p&&e.textContent&&jsxRuntime.jsx("div",{className:r(p?"col-start-2":"col-start-1",z?"row-start-auto":"row-start-1"),children:jsxRuntime.jsx(H,{name:e.participant?.name,src:e.participant?.avatarUrl,role:e.participant?.role,className:"w-10 h-10 flex-shrink-0"})}),o&&!p&&!e.textContent&&(z||$)&&jsxRuntime.jsx("div",{className:r(p?"col-start-2":"col-start-1","row-start-1"),children:jsxRuntime.jsx(H,{name:e.participant?.name,src:e.participant?.avatarUrl,role:e.participant?.role,className:"w-10 h-10 flex-shrink-0"})}),e.textContent&&jsxRuntime.jsx("div",{className:r("max-w-[85%]",p?"col-start-1 justify-self-end":"col-start-2 justify-self-start"),children:jsxRuntime.jsxs("div",{className:r("px-3.5 py-2.5 rounded-lg","border border-[var(--chat-border)]",p?"bg-[var(--chat-user-message-bg)] text-white":"bg-[var(--chat-message-bg)] text-[var(--chat-text)]",y&&"animate-pulse-subtle"),children:[jsxRuntime.jsx(chunk6X3SYLST_js.d,{children:s?jsxRuntime.jsx(S,{className:p?"prose-invert":"",children:e.textContent}):jsxRuntime.jsx("p",{className:"whitespace-pre-wrap",children:e.textContent})}),n&&!y&&e.createdAt&&jsxRuntime.jsx(St,{createdAt:typeof e.createdAt=="string"?e.createdAt:e.createdAt.toISOString(),isViewer:p})]})}),c&&c.length>0&&!y&&jsxRuntime.jsx("div",{className:r("max-w-[80%]",p?"col-start-1 justify-self-end":"col-start-2 justify-self-start"),children:jsxRuntime.jsx(q,{actions:c,onSelect:l})})]})})});Ee.displayName="Message";function St({createdAt:e,isViewer:a}){let t=o=>{try{return new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return ""}};return jsxRuntime.jsx("span",{className:r("text-xs mt-1 block",a?"text-white/60":"text-[var(--chat-text-subtle)]"),children:t(e)})}var Ae=react.forwardRef(({onSubmit:e,disabled:a=false,placeholder:t="Type a message...",className:o},n)=>jsxRuntime.jsx(chunk6X3SYLST_js.i,{ref:n,onSubmit:e,disabled:a,className:r("sticky bottom-0 p-4","border-t border-chat-border","bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm",o),children:jsxRuntime.jsx(At,{placeholder:t,disabled:a})}));Ae.displayName="MessageComposer";function At({placeholder:e,disabled:a}){let{isSubmitting:t}=chunk6X3SYLST_js.h();return jsxRuntime.jsxs("div",{className:r("flex items-end gap-2","bg-white dark:bg-gray-800","border border-chat-border rounded-input","p-2","shadow-input","focus-within:shadow-input-focus focus-within:border-chat-border-hover","transition-all duration-200"),children:[jsxRuntime.jsx(chunk6X3SYLST_js.j,{placeholder:e,disabled:a||t,className:r("flex-1 resize-none","min-h-[40px] max-h-[200px]","px-2 py-2","bg-transparent","text-chat-text placeholder:text-chat-subtle","focus:outline-none","disabled:opacity-50"),rows:1}),jsxRuntime.jsx(chunk6X3SYLST_js.k,{disabled:a,className:r("flex-shrink-0","w-10 h-10 rounded-button","flex items-center justify-center","bg-primary text-white","shadow-button","hover:shadow-button-hover hover:brightness-110","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-button","transition-all duration-200"),children:jsxRuntime.jsx(lucideReact.Send,{className:"w-5 h-5"})})]})}var De=react.forwardRef(({className:e},a)=>jsxRuntime.jsx(chunk6X3SYLST_js.r,{ref:a,className:r("inline-flex items-center gap-1","px-4 py-3 rounded-message","bg-chat-message-bg",e),children:jsxRuntime.jsx("span",{className:"flex gap-1",children:[0,1,2].map(t=>jsxRuntime.jsx("span",{className:r("w-2 h-2 rounded-full bg-chat-subtle","animate-typing"),style:{animationDelay:`${t*.2}s`}},t))})}));De.displayName="TypingIndicator";var Ie=react.forwardRef(({content:e,isStreaming:a=false,renderMarkdown:t=true,className:o},n)=>jsxRuntime.jsx(chunk6X3SYLST_js.m,{ref:n,content:e,isStreaming:a,showCursor:a,className:r("relative",o),cursor:jsxRuntime.jsx("span",{className:r("inline-block w-0.5 h-[1em] ml-0.5","bg-current align-text-bottom","animate-[blink_1s_step-end_infinite]")}),children:t?jsxRuntime.jsx(S,{children:e}):jsxRuntime.jsx("span",{className:"whitespace-pre-wrap",children:e})}));Ie.displayName="StreamingText";function Bt(e){return e.startsWith("image/")?lucideReact.Image:e==="application/pdf"||e.startsWith("text/")?lucideReact.FileText:lucideReact.File}function $t(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/1024/1024).toFixed(1)} MB`}var ze=react.forwardRef(({attachment:e,onRemove:a,removable:t=true,className:o},n)=>{let s=Bt(e.mimeType),f=e.mimeType.startsWith("image/");return jsxRuntime.jsxs("div",{ref:n,className:r("relative group","flex items-center gap-2","p-2 rounded-lg","border border-chat-border","bg-chat-panel-bg",o),children:[jsxRuntime.jsx("div",{className:r("w-10 h-10 rounded","flex items-center justify-center","bg-gray-100 dark:bg-gray-800","overflow-hidden flex-shrink-0"),children:f&&e.previewUrl?jsxRuntime.jsx("img",{src:e.previewUrl,alt:e.filename,className:"w-full h-full object-cover"}):jsxRuntime.jsx(s,{className:"w-5 h-5 text-chat-subtle"})}),jsxRuntime.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntime.jsx("p",{className:"text-sm font-medium truncate text-chat-text",children:e.filename}),jsxRuntime.jsx("p",{className:"text-xs text-chat-subtle",children:$t(e.size)})]}),t&&a&&jsxRuntime.jsx("button",{type:"button",onClick:a,className:r("absolute -top-1.5 -right-1.5","w-5 h-5 rounded-full","flex items-center justify-center","bg-gray-500 text-white","opacity-0 group-hover:opacity-100","hover:bg-gray-600","transition-opacity duration-200"),"aria-label":`Remove ${e.filename}`,children:jsxRuntime.jsx(lucideReact.X,{className:"w-3 h-3"})})]})});ze.displayName="AttachmentPreview";function jt({title:e,subtitle:a,logo:t,actions:o,showClose:n,onClose:s,loading:f,className:c,style:l}){let[d,h]=react.useState(false),A=react.useRef(null),p=react.useRef(null);return react.useEffect(()=>{let x=y=>{A.current&&!A.current.contains(y.target)&&p.current&&!p.current.contains(y.target)&&h(false);};if(d)return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[d]),jsxRuntime.jsxs("header",{className:r("flex items-center justify-between gap-3","px-4 py-3","border-b border-[var(--chat-border)]","bg-[var(--chat-header-bg,#ffffff)]",c),style:l,children:[jsxRuntime.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t&&jsxRuntime.jsx("div",{className:"flex-shrink-0",children:typeof t=="string"?jsxRuntime.jsx("img",{src:t,alt:"",className:"w-10 h-10 rounded-lg object-contain"}):t}),jsxRuntime.jsxs("div",{className:"flex flex-col min-w-0",children:[f?jsxRuntime.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"}):jsxRuntime.jsx("h1",{className:"text-lg font-semibold text-[var(--chat-text)] truncate",children:e}),a&&jsxRuntime.jsx("p",{className:"text-sm text-[var(--chat-text-subtle)] truncate",children:a})]})]}),jsxRuntime.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o&&o.length>0&&jsxRuntime.jsxs("div",{className:"relative",children:[jsxRuntime.jsx("button",{ref:p,onClick:()=>h(!d),className:r("p-2 rounded-lg","text-[var(--chat-text-subtle)]","hover:bg-[var(--chat-panel-bg)] hover:text-[var(--chat-text)]","transition-colors duration-200"),"aria-label":"Menu","aria-expanded":d,children:jsxRuntime.jsx(lucideReact.MoreVertical,{size:18})}),d&&jsxRuntime.jsx("div",{ref:A,className:r("absolute right-0 top-full mt-1 z-50","min-w-[180px]","bg-white rounded-lg shadow-lg","border border-[var(--chat-border)]","py-1","animate-fade-in"),children:o.map(x=>jsxRuntime.jsxs("button",{onClick:()=>{x.onClick(),h(false);},disabled:x.disabled,className:r("w-full flex items-center gap-2 px-3 py-2","text-sm text-left","text-[var(--chat-text)]","hover:bg-[var(--chat-panel-bg)]","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors duration-150"),children:[x.icon&&jsxRuntime.jsx("span",{className:"flex-shrink-0 text-[var(--chat-text-subtle)]",children:x.icon}),x.label]},x.id))})]}),n&&s&&jsxRuntime.jsx("button",{onClick:s,className:r("p-2 rounded-lg","text-[var(--chat-text-subtle)]","hover:bg-[var(--chat-panel-bg)] hover:text-[var(--chat-text)]","transition-colors duration-200"),"aria-label":"Close",children:jsxRuntime.jsx(lucideReact.X,{size:18})})]})]})}function Jt({attachments:e,onDownload:a,onPreview:t,className:o}){let[n,s]=react.useState(null);if(!e||e.length===0)return null;let f=l=>{if(a){a(l);return}if(l.url){let d=document.createElement("a");d.href=l.url,d.download=l.filename,d.target="_blank",document.body.appendChild(d),d.click(),document.body.removeChild(d);}},c=l=>{if(t){t(l);return}l.isImage&&l.url&&s(l.url);};return jsxRuntime.jsxs("div",{className:r("space-y-2",o),children:[e.map(l=>jsxRuntime.jsx(Qt,{attachment:l,onDownload:()=>f(l),onPreview:()=>c(l)},l.id)),n&&jsxRuntime.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:()=>s(null),children:[jsxRuntime.jsx("button",{className:"absolute top-4 right-4 p-2 text-white hover:bg-white/20 rounded-full transition-colors",onClick:()=>s(null),"aria-label":"Close",children:jsxRuntime.jsx(lucideReact.X,{size:24})}),jsxRuntime.jsx("img",{src:n,alt:"Preview",className:"max-w-[90vw] max-h-[90vh] object-contain",onClick:l=>l.stopPropagation()})]})]})}function Qt({attachment:e,onDownload:a,onPreview:t}){return e.isImage&&e.url?jsxRuntime.jsxs("div",{className:"rounded-lg border border-[var(--chat-border)] overflow-hidden",children:[jsxRuntime.jsx("div",{className:"relative h-48 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:jsxRuntime.jsx("img",{src:e.previewUrl||e.url,alt:e.filename,className:"w-full h-full object-cover"})}),jsxRuntime.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[var(--chat-panel-bg)]",children:[jsxRuntime.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntime.jsx(lucideReact.Image,{size:16,className:"text-[var(--chat-primary)] flex-shrink-0"}),jsxRuntime.jsx("span",{className:"text-sm text-[var(--chat-text)] truncate",children:e.filename})]}),jsxRuntime.jsx("button",{onClick:a,className:"p-1.5 hover:bg-[var(--chat-border)] rounded transition-colors flex-shrink-0","aria-label":"Download",children:jsxRuntime.jsx(lucideReact.Download,{size:16,className:"text-[var(--chat-text-subtle)]"})})]})]}):e.isVideo&&e.url?jsxRuntime.jsxs("div",{className:"rounded-lg border border-[var(--chat-border)] overflow-hidden",children:[jsxRuntime.jsx("video",{src:e.url,controls:true,className:"w-full h-48 object-cover"}),jsxRuntime.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[var(--chat-panel-bg)]",children:[jsxRuntime.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntime.jsx(lucideReact.Video,{size:16,className:"text-[var(--chat-primary)] flex-shrink-0"}),jsxRuntime.jsx("span",{className:"text-sm text-[var(--chat-text)] truncate",children:e.filename})]}),jsxRuntime.jsx("button",{onClick:a,className:"p-1.5 hover:bg-[var(--chat-border)] rounded transition-colors flex-shrink-0","aria-label":"Download",children:jsxRuntime.jsx(lucideReact.Download,{size:16,className:"text-[var(--chat-text-subtle)]"})})]})]}):jsxRuntime.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-[var(--chat-border)] bg-[var(--chat-panel-bg)]",children:[jsxRuntime.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center bg-gray-100 rounded-lg",children:jsxRuntime.jsx(Yt,{mimeType:e.mimeType})}),jsxRuntime.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntime.jsx("p",{className:"text-sm text-[var(--chat-text)] truncate",children:e.filename}),jsxRuntime.jsx("p",{className:"text-xs text-[var(--chat-text-subtle)]",children:e.humanReadableSize||Zt(e.size)})]}),jsxRuntime.jsx("button",{onClick:a,className:"p-2 hover:bg-[var(--chat-border)] rounded-lg transition-colors flex-shrink-0","aria-label":"Download",children:jsxRuntime.jsx(lucideReact.Download,{size:18,className:"text-[var(--chat-text-subtle)]"})})]})}function Yt({mimeType:e}){return e.startsWith("image/")?jsxRuntime.jsx(lucideReact.Image,{size:20,className:"text-[var(--chat-primary)]"}):e.startsWith("video/")?jsxRuntime.jsx(lucideReact.Video,{size:20,className:"text-[var(--chat-primary)]"}):e==="application/pdf"?jsxRuntime.jsx(lucideReact.FileText,{size:20,className:"text-red-500"}):jsxRuntime.jsx(lucideReact.FileIcon,{size:20,className:"text-gray-500"})}function Zt(e){if(e===0)return "0 Bytes";let a=1024,t=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,o)).toFixed(2))+" "+t[o]}exports.a=r;exports.b=Ne;exports.c=we;exports.d=H;exports.e=S;exports.f=Z;exports.g=j;exports.h=F;exports.i=lt;exports.j=te;exports.k=ae;exports.l=dt;exports.m=_;exports.n=re;exports.o=ne;exports.p=q;exports.q=Ee;exports.r=Ae;exports.s=De;exports.t=Ie;exports.u=ze;exports.v=jt;exports.w=Jt;//# sourceMappingURL=chunk-73O72VEE.js.map
//# sourceMappingURL=chunk-73O72VEE.js.map