'use strict';var react=require('react');function A(r={}){let[c,i]=react.useState({isStreaming:false,streamingMessageId:null,streamedContent:""}),n=react.useRef(null),m=react.useCallback(e=>{i({isStreaming:true,streamingMessageId:e,streamedContent:""}),n.current=new AbortController;},[]),d=react.useCallback(e=>{e.type==="content"&&e.content&&i(u=>({...u,streamedContent:u.streamedContent+e.content})),r.onChunk?.(e);},[r]),p=react.useCallback(()=>{n.current?.abort();let e=c.streamedContent;i({isStreaming:false,streamingMessageId:null,streamedContent:""}),r.onComplete?.(e);},[c.streamedContent,r]),f=react.useCallback(e=>{n.current?.abort(),i({isStreaming:false,streamingMessageId:null,streamedContent:""}),r.onError?.(e);},[r]);return {...c,startStreaming:m,appendContent:d,stopStreaming:p,handleError:f,abortSignal:n.current?.signal}}function x({maxCount:r=5,maxFileSize:c=10*1024*1024,allowedTypes:i}={}){let[n,m]=react.useState([]),d=react.useCallback(t=>{if(n.length>=r)return {success:false,error:`Maximum ${r} attachments allowed`};if(t.size>c)return {success:false,error:`File size exceeds ${Math.round(c/1024/1024)}MB limit`};if(i&&!i.includes(t.type))return {success:false,error:`File type ${t.type} not allowed`};let o=`${Date.now()}-${Math.random().toString(36).slice(2)}`;return m(a=>[...a,{file:t,id:o,progress:0,status:"pending"}]),{success:true}},[n.length,r,c,i]),p=react.useCallback(t=>{m(o=>o.filter(a=>a.id!==t));},[]),f=react.useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,progress:o,status:o<100?"uploading":"complete"}:s));},[]),e=react.useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,status:"error",error:o}:s));},[]),u=react.useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,url:o,status:"complete",progress:100}:s));},[]),S=react.useCallback(()=>{m([]);},[]),C=react.useCallback(()=>n.map(t=>t.file),[n]);return {attachments:n,addAttachment:d,removeAttachment:p,updateProgress:f,setError:e,setUrl:u,clear:S,getFiles:C,canAddMore:n.length<r}}exports.a=A;exports.b=x;//# sourceMappingURL=chunk-WGC7KPVE.js.map
//# sourceMappingURL=chunk-WGC7KPVE.js.map