{"version":3,"sources":["../src/utils/cn.ts","../src/styled/ChatContainer.tsx","../src/styled/MessageList.tsx","../src/styled/Avatar.tsx","../src/styled/MarkdownContent.tsx","../src/styled/LoadingDots.tsx","../src/styled/StatusBadge.tsx","../src/styled/Timeline.tsx","../src/styled/EventContent.tsx","../src/styled/EventTimeline.tsx","../src/styled/PlanTimeline.tsx","../src/styled/ReasoningPanel.tsx","../src/styled/SuggestedActions.tsx","../src/styled/Message.tsx","../src/styled/MessageComposer.tsx","../src/styled/TypingIndicator.tsx","../src/styled/StreamingText.tsx","../src/styled/AttachmentPreview.tsx","../src/styled/ChatHeader.tsx","../src/styled/MessageAttachments.tsx"],"names":["cn","inputs","twMerge","clsx","ChatContainer","forwardRef","children","className","props","ref","jsx","MessageList","autoScroll","sizeClasses","iconSizes","getRoleIcon","role","size","iconSize","Bot","User","Avatar","name","src","alt","MarkdownContent","ReactMarkdown","remarkGfm","href","gapClasses","LoadingDots","dotClass","jsxs","StatusBadge","status","iconProps","CircleDashed","Loader2","CircleCheck","CircleX","Timeline","items","badgeSize","item","index","isLast","nextItemPending","TimelineItem","EventContent","event","Wrench","success","INTERNAL_TOOLS","isInternalTool","toolName","convertChunkToEvent","chunk","isComplete","convertTimelineToEvents","timeline","events","thought","tool","EventTimeline","timelineItems","convertChunksToEvents","chunks","SubtaskContent","subtask","executionChunks","isExpanded","setIsExpanded","useState","hasExecutionDetails","e","ChevronUp","ChevronDown","PlanTimeline","plan","streamingChunks","completedCount","totalCount","progressPct","subtaskChunks","formatDuration","seconds","ReasoningPanel","isStreaming","executionTime","defaultExpanded","controlledExpanded","onExpandedChange","localExpanded","setLocalExpanded","setExpanded","value","streamingEvents","useMemo","aggregatedPlanData","planningChunk","c","planClone","subtasks","failedCount","subtaskIndex","st","errorMatch","totalExecutionTime","sum","lastChunk","isToolAction","isPlanningAction","getChipLabel","getChipIcon","ListTodo","Sparkle","shouldShowPlanTimeline","planData","activePlan","showPlanTimeline","SuggestedActions","actions","onSelect","action","ActionButton","Message","message","viewerRole","showAvatar","showTimestamp","renderMarkdown","reasoning","suggestedActions","onSuggestedAction","reasoningExpanded","onReasoningExpandedChange","isViewer","isAssistant","reasoningChunks","hasReasoning","isWaitingForContent","MessageContent","MessageTimestamp","createdAt","formatTime","dateString","MessageComposer","onSubmit","disabled","placeholder","ComposerContent","isSubmitting","useComposer","ComposerInput","ComposerSubmit","Send","TypingIndicator","i","StreamingText","content","getFileIcon","mimeType","ImageIcon","FileText","FileIcon","formatFileSize","bytes","AttachmentPreview","attachment","onRemove","removable","Icon","isImage","X","ChatHeader","title","subtitle","logo","showClose","onClose","loading","style","menuOpen","setMenuOpen","menuRef","useRef","buttonRef","useEffect","handleClickOutside","MoreVertical","MessageAttachments","attachments","onDownload","onPreview","lightboxUrl","setLightboxUrl","handleDownload","link","handlePreview","AttachmentCard","Download","Video","FileTypeIcon","k","sizes"],"mappings":"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","file":"chunk-7YA2TCAG.mjs","sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\n/**\n * Utility function to merge Tailwind CSS classes with proper precedence.\n * Combines clsx for conditional classes with tailwind-merge for conflict resolution.\n *\n * @example\n * cn(\"px-4 py-2\", \"px-6\") // => \"py-2 px-6\"\n * cn(\"text-red-500\", isActive && \"text-blue-500\") // => \"text-blue-500\" when isActive\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","import { forwardRef, type ReactNode, type HTMLAttributes } from \"react\";\nimport { cn } from \"../utils/cn\";\n\nexport interface ChatContainerProps extends HTMLAttributes<HTMLDivElement> {\n  /** Children to render */\n  children: ReactNode;\n}\n\n/**\n * Styled container for the chat interface.\n * Provides flex layout and base styling.\n */\nexport const ChatContainer = forwardRef<HTMLDivElement, ChatContainerProps>(\n  ({ children, className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex flex-col h-full\",\n          \"bg-white dark:bg-gray-900\",\n          \"font-sans text-chat-text\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nChatContainer.displayName = \"ChatContainer\";\n","import { forwardRef, type ReactNode } from \"react\";\nimport { MessageList as MessageListPrimitive } from \"../primitives\";\nimport { cn } from \"../utils/cn\";\n\nexport interface MessageListProps {\n  /** Messages to render */\n  children: ReactNode;\n  /** Whether to auto-scroll to bottom */\n  autoScroll?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled MessageList with scrolling and spacing.\n */\nexport const MessageList = forwardRef<HTMLDivElement, MessageListProps>(\n  ({ children, autoScroll = true, className }, ref) => {\n    return (\n      <MessageListPrimitive\n        ref={ref}\n        autoScroll={autoScroll}\n        className={cn(\n          \"flex-1 overflow-y-auto\",\n          \"flex flex-col gap-4 p-4\",\n          \"chat-scrollbar\",\n          className\n        )}\n      >\n        {children}\n      </MessageListPrimitive>\n    );\n  }\n);\n\nMessageList.displayName = \"MessageList\";\n","import { forwardRef } from \"react\";\nimport { Bot, User } from \"lucide-react\";\nimport { Avatar as AvatarPrimitive, type AvatarProps as AvatarPrimitiveProps } from \"../primitives\";\nimport { cn } from \"../utils/cn\";\nimport type { ParticipantRole } from \"../types\";\n\nexport interface AvatarProps extends Omit<AvatarPrimitiveProps, \"fallback\"> {\n  /** Size variant */\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n\nconst sizeClasses = {\n  sm: \"w-6 h-6 text-xs\",\n  md: \"w-8 h-8 text-sm\",\n  lg: \"w-10 h-10 text-base\",\n};\n\nconst iconSizes = {\n  sm: 14,\n  md: 16,\n  lg: 20,\n};\n\nfunction getRoleIcon(role: ParticipantRole | undefined, size: \"sm\" | \"md\" | \"lg\") {\n  const iconSize = iconSizes[size];\n\n  switch (role) {\n    case \"assistant\":\n      return <Bot size={iconSize} />;\n    case \"user\":\n      return <User size={iconSize} />;\n    default:\n      return <User size={iconSize} />;\n  }\n}\n\n/**\n * Styled Avatar component with role-based icons.\n */\nexport const Avatar = forwardRef<HTMLDivElement, AvatarProps>(\n  ({ name, src, alt, role, size = \"md\", className, ...props }, ref) => {\n    return (\n      <AvatarPrimitive\n        ref={ref}\n        name={name}\n        src={src}\n        alt={alt}\n        role={role}\n        className={cn(\n          \"rounded-full overflow-hidden flex-shrink-0\",\n          \"flex items-center justify-center\",\n          \"font-medium\",\n          role === \"assistant\"\n            ? \"bg-primary/10 text-primary\"\n            : \"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300\",\n          sizeClasses[size],\n          className\n        )}\n        fallback={getRoleIcon(role, size)}\n        {...props}\n      />\n    );\n  }\n);\n\nAvatar.displayName = \"Avatar\";\n","import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { cn } from \"../utils/cn\";\n\nexport interface MarkdownContentProps {\n  /** Markdown content to render */\n  children: string;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled markdown renderer using react-markdown with Tailwind classes.\n */\nexport function MarkdownContent({ children, className }: MarkdownContentProps) {\n  return (\n    <ReactMarkdown\n      className={cn(\"chat-prose\", className)}\n      remarkPlugins={[remarkGfm]}\n      components={{\n        h1: ({ children }) => (\n          <h1 className=\"text-2xl font-semibold mt-4 mb-2 first:mt-0\">{children}</h1>\n        ),\n        h2: ({ children }) => (\n          <h2 className=\"text-xl font-semibold mt-3 mb-2 first:mt-0\">{children}</h2>\n        ),\n        h3: ({ children }) => (\n          <h3 className=\"text-lg font-medium mt-2 mb-1 first:mt-0\">{children}</h3>\n        ),\n        h4: ({ children }) => (\n          <h4 className=\"text-base font-medium mt-2 mb-1 first:mt-0\">{children}</h4>\n        ),\n        p: ({ children }) => (\n          <p className=\"mb-2 last:mb-0 leading-relaxed\">{children}</p>\n        ),\n        a: ({ href, children }) => (\n          <a\n            href={href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-primary underline hover:opacity-80 transition-opacity\"\n          >\n            {children}\n          </a>\n        ),\n        ul: ({ children }) => (\n          <ul className=\"list-disc pl-4 mb-2 space-y-1\">{children}</ul>\n        ),\n        ol: ({ children }) => (\n          <ol className=\"list-decimal pl-4 mb-2 space-y-1\">{children}</ol>\n        ),\n        li: ({ children }) => <li className=\"leading-relaxed\">{children}</li>,\n        blockquote: ({ children }) => (\n          <blockquote className=\"border-l-2 border-gray-300 dark:border-gray-600 pl-3 my-2 italic text-chat-subtle\">\n            {children}\n          </blockquote>\n        ),\n        code: ({ className, children }) => {\n          // Check if this is inline code or a code block\n          const isInline = !className;\n\n          if (isInline) {\n            return (\n              <code className=\"bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono\">\n                {children}\n              </code>\n            );\n          }\n\n          // Code block\n          return (\n            <code className=\"block text-sm font-mono\">{children}</code>\n          );\n        },\n        pre: ({ children }) => (\n          <pre className=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg overflow-x-auto text-sm my-2\">\n            {children}\n          </pre>\n        ),\n        table: ({ children }) => (\n          <div className=\"overflow-x-auto my-2 rounded-lg border border-gray-200 dark:border-gray-700\">\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n              {children}\n            </table>\n          </div>\n        ),\n        thead: ({ children }) => (\n          <thead className=\"bg-gray-50 dark:bg-gray-800\">{children}</thead>\n        ),\n        th: ({ children }) => (\n          <th className=\"px-3 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {children}\n          </th>\n        ),\n        td: ({ children }) => (\n          <td className=\"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700\">\n            {children}\n          </td>\n        ),\n        hr: () => <hr className=\"my-4 border-gray-200 dark:border-gray-700\" />,\n        strong: ({ children }) => (\n          <strong className=\"font-semibold\">{children}</strong>\n        ),\n        em: ({ children }) => <em className=\"italic\">{children}</em>,\n        img: ({ src, alt }) => (\n          <img\n            src={src}\n            alt={alt ?? \"\"}\n            className=\"max-w-full h-auto rounded-lg my-2\"\n            loading=\"lazy\"\n          />\n        ),\n      }}\n    >\n      {children}\n    </ReactMarkdown>\n  );\n}\n","import { cn } from \"../utils/cn\";\n\nexport interface LoadingDotsProps {\n  /** Size variant */\n  size?: \"small\" | \"medium\" | \"large\";\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst sizeClasses = {\n  small: \"w-1.5 h-1.5\",\n  medium: \"w-2 h-2\",\n  large: \"w-2.5 h-2.5\",\n};\n\nconst gapClasses = {\n  small: \"gap-1\",\n  medium: \"gap-1.5\",\n  large: \"gap-2\",\n};\n\n/**\n * Animated loading dots indicator\n */\nexport function LoadingDots({ size = \"medium\", className }: LoadingDotsProps) {\n  const dotClass = sizeClasses[size];\n\n  return (\n    <div className={cn(\"flex items-center\", gapClasses[size], className)}>\n      <div\n        className={cn(\n          dotClass,\n          \"rounded-full bg-[var(--chat-text-subtle)]\",\n          \"animate-loading-dot animate-loading-dot-1\"\n        )}\n      />\n      <div\n        className={cn(\n          dotClass,\n          \"rounded-full bg-[var(--chat-text-subtle)]\",\n          \"animate-loading-dot animate-loading-dot-2\"\n        )}\n      />\n      <div\n        className={cn(\n          dotClass,\n          \"rounded-full bg-[var(--chat-text-subtle)]\",\n          \"animate-loading-dot animate-loading-dot-3\"\n        )}\n      />\n    </div>\n  );\n}\n","import { CircleCheck, CircleDashed, CircleX, Loader2 } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport type { EventStatus } from \"../types\";\n\ninterface StatusBadgeProps {\n  status: EventStatus;\n  size?: number;\n  className?: string;\n}\n\n/**\n * Circular status badge with animations\n * - Pending: Dashed circle\n * - Running: Animated spinning loader\n * - Completed: Check circle\n * - Failed: X circle\n */\nexport function StatusBadge({ status, size = 16, className }: StatusBadgeProps) {\n  const iconProps = { size, strokeWidth: 2 };\n\n  return (\n    <div\n      className={cn(\"relative flex-shrink-0\", className)}\n      style={{ width: size, height: size }}\n    >\n      {status === \"pending\" && (\n        <CircleDashed\n          {...iconProps}\n          className=\"text-[var(--chat-text-subtle)] opacity-40\"\n        />\n      )}\n      {status === \"running\" && (\n        <Loader2\n          {...iconProps}\n          className=\"text-[var(--chat-text-subtle)] animate-spin\"\n        />\n      )}\n      {status === \"completed\" && (\n        <CircleCheck\n          {...iconProps}\n          className=\"text-[var(--chat-text-subtle)]\"\n        />\n      )}\n      {status === \"failed\" && (\n        <CircleX\n          {...iconProps}\n          className=\"text-red-500\"\n        />\n      )}\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport { cn } from \"../utils/cn\";\nimport { StatusBadge } from \"./StatusBadge\";\nimport type { EventStatus } from \"../types\";\n\nexport interface TimelineItemData {\n  id: string;\n  status: EventStatus;\n  content: ReactNode;\n}\n\nexport interface TimelineProps {\n  items: TimelineItemData[];\n  badgeSize?: number;\n  className?: string;\n}\n\n/**\n * Vertical timeline component\n * Displays items with status badges and connecting lines\n */\nexport function Timeline({ items, badgeSize = 20, className }: TimelineProps) {\n  if (items.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className={cn(\"max-w-full\", className)}>\n      <div className=\"flex flex-col\">\n        {items.map((item, index) => {\n          const isLast = index === items.length - 1;\n          const nextItemPending = !isLast && items[index + 1]?.status === \"pending\";\n\n          return (\n            <div\n              key={item.id}\n              className=\"animate-fade-in\"\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: `${badgeSize}px 1fr`,\n                gap: \"0.5rem\",\n                paddingBottom: isLast ? 0 : \"0.5rem\",\n                position: \"relative\",\n              }}\n            >\n              {/* Status Badge Column */}\n              <div\n                className=\"relative flex flex-col items-center flex-shrink-0\"\n                style={{ paddingTop: \"4px\" }}\n              >\n                <StatusBadge status={item.status} size={badgeSize} />\n\n                {/* Vertical Connector Line */}\n                {!isLast && (\n                  <div\n                    className=\"absolute left-1/2 -translate-x-1/2\"\n                    style={{\n                      top: badgeSize + 6,\n                      height: `calc(100% - ${badgeSize}px + 4px)`,\n                      width: 0,\n                      borderLeft: \"2px\",\n                      borderStyle: nextItemPending ? \"dashed\" : \"solid\",\n                      borderColor: \"var(--chat-border)\",\n                      zIndex: 1,\n                    }}\n                  />\n                )}\n              </div>\n\n              {/* Content */}\n              <div className=\"min-w-0 flex-1 flex items-center\">\n                {item.content}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport interface TimelineItemProps {\n  status: EventStatus;\n  isLast?: boolean;\n  badgeSize?: number;\n  children: ReactNode;\n  className?: string;\n}\n\n/**\n * Single timeline item (alternative API)\n */\nexport function TimelineItem({\n  status,\n  isLast = false,\n  badgeSize = 16,\n  children,\n  className,\n}: TimelineItemProps) {\n  return (\n    <div\n      className={cn(\n        \"relative flex items-start gap-3 animate-fade-in\",\n        !isLast && \"pb-3\",\n        className\n      )}\n    >\n      {/* Status Badge */}\n      <div className=\"relative flex-shrink-0 pt-0.5\">\n        <StatusBadge status={status} size={badgeSize} />\n\n        {/* Vertical Connector Line */}\n        {!isLast && (\n          <div\n            className=\"absolute bg-[var(--chat-border)] opacity-30\"\n            style={{\n              left: badgeSize / 2 - 0.5,\n              top: badgeSize + 4,\n              height: \"calc(100% + 12px)\",\n              width: 1,\n              zIndex: 1,\n            }}\n          />\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"min-w-0 flex-1\">{children}</div>\n    </div>\n  );\n}\n","import { Wrench } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport { MarkdownContent } from \"./MarkdownContent\";\nimport type { Event } from \"../types\";\n\ninterface EventContentProps {\n  event: Event;\n  className?: string;\n}\n\n/**\n * Renders content for different event types\n * - Thinking: Markdown content with subtle styling\n * - Planning: Markdown content with planning context\n * - Tool: Chip-style display with tool name\n * - Observation: Colored result panel\n */\nexport function EventContent({ event, className }: EventContentProps) {\n  if (event.type === \"thinking\") {\n    return (\n      <div\n        className={cn(\n          \"p-1 rounded transition-colors\",\n          \"bg-black/[0.01] hover:bg-black/[0.02]\",\n          className\n        )}\n      >\n        <div className=\"text-[var(--chat-text-subtle)] text-sm leading-relaxed\">\n          <MarkdownContent>{event.content}</MarkdownContent>\n        </div>\n      </div>\n    );\n  }\n\n  if (event.type === \"planning\") {\n    return (\n      <div\n        className={cn(\n          \"p-1 rounded transition-colors\",\n          \"bg-black/[0.01] hover:bg-black/[0.02]\",\n          className\n        )}\n      >\n        <div className=\"text-[var(--chat-text-subtle)] text-sm leading-relaxed\">\n          <MarkdownContent>{event.content}</MarkdownContent>\n        </div>\n      </div>\n    );\n  }\n\n  if (event.type === \"tool\") {\n    return (\n      <div\n        className={cn(\n          \"inline-flex items-center gap-1 px-2 py-0.5\",\n          \"border border-[var(--chat-border)] rounded\",\n          \"bg-white\",\n          className\n        )}\n      >\n        <Wrench size={14} className=\"text-[var(--chat-text-subtle)]\" />\n        <span className=\"text-sm text-[var(--chat-text)]\">\n          {event.toolDescription || event.toolName}\n        </span>\n      </div>\n    );\n  }\n\n  if (event.type === \"observation\") {\n    const success = event.success !== false;\n\n    return (\n      <div\n        className={cn(\n          \"px-3 py-1.5 rounded max-w-full overflow-auto\",\n          success\n            ? \"bg-green-50 border-l-[3px] border-green-400\"\n            : \"bg-yellow-50 border-l-[3px] border-yellow-400\",\n          className\n        )}\n      >\n        <span\n          className={cn(\n            \"text-xs font-semibold uppercase tracking-wide block mb-1\",\n            success ? \"text-green-700\" : \"text-yellow-700\"\n          )}\n        >\n          {event.toolName} Result\n        </span>\n        <div\n          className={cn(\n            \"text-sm\",\n            success ? \"text-green-900\" : \"text-yellow-900\"\n          )}\n        >\n          <MarkdownContent>{event.content}</MarkdownContent>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { Timeline, type TimelineItemData } from \"./Timeline\";\nimport { EventContent } from \"./EventContent\";\nimport type { Event, EventStatus, StreamingChunk } from \"../types\";\n\n/**\n * Internal tools that should be hidden from users\n */\nconst INTERNAL_TOOLS = [\"create_plan\", \"unknown\"];\n\nfunction isInternalTool(toolName?: string): boolean {\n  if (!toolName) return false;\n  return INTERNAL_TOOLS.includes(toolName.toLowerCase().trim());\n}\n\n/**\n * Convert StreamingChunk to Event format\n */\nexport function convertChunkToEvent(chunk: StreamingChunk, index: number): Event | null {\n  // Filter out internal tools\n  if (chunk.toolName && isInternalTool(chunk.toolName)) {\n    return null;\n  }\n\n  if (chunk.type === \"thinking\") {\n    // Skip empty thinking chunks\n    if (!chunk.content || chunk.content.trim().length === 0) {\n      return null;\n    }\n\n    return {\n      id: `thinking-${index}`,\n      type: \"thinking\",\n      status: \"completed\",\n      content: chunk.content,\n    };\n  }\n\n  if (chunk.type === \"planning\") {\n    // Skip empty planning chunks\n    if (!chunk.content || chunk.content.trim().length === 0) {\n      return null;\n    }\n\n    const isComplete = chunk.planData !== undefined || chunk.content.includes(\" Created plan\");\n\n    return {\n      id: `planning-${index}`,\n      type: \"planning\",\n      status: isComplete ? \"completed\" : \"running\",\n      content: chunk.content,\n      isComplete,\n    };\n  }\n\n  if (chunk.type === \"tool\") {\n    const status: EventStatus =\n      chunk.status === \"executing\"\n        ? \"running\"\n        : chunk.status === \"completed\"\n          ? \"completed\"\n          : \"pending\";\n\n    return {\n      id: `tool-${index}`,\n      type: \"tool\",\n      status,\n      toolName: chunk.toolName || \"Unknown Tool\",\n      toolDescription: chunk.toolDescription,\n    };\n  }\n\n  // Don't render observation chunks separately\n  return null;\n}\n\n/**\n * Convert timeline items (from metadata) to Events\n */\nexport function convertTimelineToEvents(timeline: Array<Record<string, unknown>>): Event[] {\n  const events: Event[] = [];\n\n  timeline.forEach((item, index) => {\n    if (item.type === \"thought\") {\n      const thought = item.thought as string | undefined;\n      if (!thought || thought.trim().length === 0) {\n        return;\n      }\n\n      events.push({\n        id: `thought-${index}`,\n        type: \"thinking\",\n        status: \"completed\",\n        content: thought,\n      });\n    } else if (item.type === \"tool\") {\n      const tool = (item.tool as string) || \"Unknown Tool\";\n      if (isInternalTool(tool)) {\n        return;\n      }\n\n      events.push({\n        id: `tool-${index}`,\n        type: \"tool\",\n        status: \"completed\",\n        toolName: tool,\n        toolDescription: item.tool_description as string | undefined,\n      });\n    }\n  });\n\n  return events;\n}\n\nexport interface EventTimelineProps {\n  events: Event[];\n  isStreaming?: boolean;\n  className?: string;\n}\n\n/**\n * Unified event timeline component\n * Displays thinking, tool execution, and observation events\n */\nexport function EventTimeline({ events, className }: EventTimelineProps) {\n  if (events.length === 0) {\n    return null;\n  }\n\n  // Convert events to timeline items\n  const timelineItems: TimelineItemData[] = events.map((event) => ({\n    id: event.id,\n    status: event.status,\n    content: <EventContent event={event} />,\n  }));\n\n  return <Timeline items={timelineItems} badgeSize={20} className={className} />;\n}\n","import { useState } from \"react\";\nimport { ChevronDown, ChevronUp } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport { Timeline, type TimelineItemData } from \"./Timeline\";\nimport { EventTimeline } from \"./EventTimeline\";\nimport type { PlanData, StreamingChunk, Event, EventStatus, SubTaskData } from \"../types\";\n\n/**\n * Convert streaming chunks to Events for a specific subtask\n */\nfunction convertChunksToEvents(chunks: StreamingChunk[]): Event[] {\n  const events: Event[] = [];\n\n  chunks.forEach((chunk, index) => {\n    if (chunk.type === \"thinking\") {\n      if (!chunk.content || chunk.content.trim().length === 0) {\n        return;\n      }\n\n      events.push({\n        id: `thinking-${index}`,\n        type: \"thinking\",\n        status: \"completed\",\n        content: chunk.content,\n      });\n    } else if (chunk.type === \"tool\") {\n      const status: EventStatus =\n        chunk.status === \"executing\"\n          ? \"running\"\n          : chunk.status === \"completed\"\n            ? \"completed\"\n            : \"pending\";\n\n      events.push({\n        id: `tool-${index}`,\n        type: \"tool\",\n        status,\n        toolName: chunk.toolName || \"Unknown Tool\",\n        toolDescription: chunk.toolDescription,\n      });\n    }\n  });\n\n  return events;\n}\n\ninterface SubtaskContentProps {\n  subtask: SubTaskData;\n  executionChunks?: StreamingChunk[];\n}\n\n/**\n * Content component for each subtask\n */\nfunction SubtaskContent({ subtask, executionChunks = [] }: SubtaskContentProps) {\n  const [isExpanded, setIsExpanded] = useState(subtask.status === \"running\");\n\n  // Auto-expand when running\n  if (subtask.status === \"running\" && !isExpanded) {\n    setIsExpanded(true);\n  }\n\n  const hasExecutionDetails = executionChunks.length > 0;\n  const events = convertChunksToEvents(executionChunks);\n\n  return (\n    <div className=\"flex-1 min-w-0\">\n      <div\n        onClick={() => hasExecutionDetails && setIsExpanded(!isExpanded)}\n        className={cn(\n          \"flex flex-col p-3 rounded\",\n          \"bg-black/[0.01] border border-[var(--chat-border)]\",\n          \"transition-colors\",\n          hasExecutionDetails && \"cursor-pointer hover:bg-black/[0.02] hover:border-black/[0.12]\"\n        )}\n      >\n        {/* Description */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between gap-1\">\n            <span className=\"text-sm font-medium text-[var(--chat-text)] leading-snug\">\n              {subtask.description}\n            </span>\n            {hasExecutionDetails && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setIsExpanded(!isExpanded);\n                }}\n                className=\"flex-shrink-0 p-0.5\"\n              >\n                {isExpanded ? (\n                  <ChevronUp size={14} className=\"text-[var(--chat-text-subtle)]\" />\n                ) : (\n                  <ChevronDown size={14} className=\"text-[var(--chat-text-subtle)]\" />\n                )}\n              </button>\n            )}\n          </div>\n\n          {/* Status info */}\n          <div className=\"flex items-center gap-1 mt-1\">\n            {subtask.status === \"completed\" && subtask.execution_time && (\n              <span className=\"text-xs text-[var(--chat-text-subtle)] font-medium\">\n                Completed in {subtask.execution_time.toFixed(2)}s\n              </span>\n            )}\n            {subtask.status === \"failed\" && subtask.error && (\n              <span className=\"text-xs text-red-600 font-medium\">\n                {subtask.error}\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* Execution details */}\n        {hasExecutionDetails && isExpanded && (\n          <div className=\"mt-3 pl-2 border-l-2 border-[var(--chat-border)]\">\n            <EventTimeline events={events} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport interface PlanTimelineProps {\n  plan: PlanData;\n  streamingChunks?: StreamingChunk[];\n  className?: string;\n}\n\n/**\n * Timeline visualization for Plan & Execute mode\n * Shows plan with expandable subtasks\n */\nexport function PlanTimeline({\n  plan,\n  streamingChunks = [],\n  className,\n}: PlanTimelineProps) {\n  const completedCount = plan.completed_subtasks || 0;\n  const totalCount = plan.total_subtasks || plan.subtasks.length;\n  const progressPct = plan.progress_percentage || (completedCount / totalCount) * 100;\n\n  // Convert subtasks to timeline items\n  const timelineItems: TimelineItemData[] = plan.subtasks.map((subtask) => {\n    const subtaskChunks = streamingChunks.filter(\n      (chunk) => chunk.subtaskId === subtask.id\n    );\n\n    // Map subtask status to EventStatus\n    const status: EventStatus =\n      subtask.status === \"running\"\n        ? \"running\"\n        : subtask.status === \"completed\"\n          ? \"completed\"\n          : subtask.status === \"failed\"\n            ? \"failed\"\n            : \"pending\";\n\n    return {\n      id: String(subtask.id),\n      status,\n      content: <SubtaskContent subtask={subtask} executionChunks={subtaskChunks} />,\n    };\n  });\n\n  return (\n    <div className={cn(\"space-y-3\", className)}>\n      {/* Progress header */}\n      <div className=\"text-sm font-medium leading-snug\">\n        Plan: {completedCount}/{totalCount} completed ({Math.round(progressPct)}%)\n      </div>\n\n      {/* Subtask timeline */}\n      <Timeline items={timelineItems} badgeSize={24} />\n    </div>\n  );\n}\n","import { useState, useMemo } from \"react\";\nimport { Sparkle, Wrench, ListTodo, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport { EventTimeline, convertChunkToEvent } from \"./EventTimeline\";\nimport { PlanTimeline } from \"./PlanTimeline\";\nimport type { StreamingChunk, PlanData, Event } from \"../types\";\n\nexport interface ReasoningPanelProps {\n  /** Whether currently streaming */\n  isStreaming?: boolean;\n  /** Streaming chunks (thinking, tool calls, etc.) */\n  chunks?: StreamingChunk[];\n  /** Execution plan for Plan & Execute mode */\n  plan?: PlanData;\n  /** Total execution time in seconds */\n  executionTime?: number;\n  /** Whether expanded by default */\n  defaultExpanded?: boolean;\n  /** Controlled expanded state */\n  expanded?: boolean;\n  /** Callback when expanded state changes */\n  onExpandedChange?: (expanded: boolean) => void;\n  /** Additional class names */\n  className?: string;\n}\n\nfunction formatDuration(seconds: number): string {\n  if (seconds < 1) {\n    return `${Math.round(seconds * 1000)}ms`;\n  }\n  return `${seconds.toFixed(1)}s`;\n}\n\n/**\n * Collapsible panel showing AI reasoning, tool execution, and planning\n * Matches main app's ReasoningPanel functionality\n */\nexport function ReasoningPanel({\n  isStreaming = false,\n  chunks = [],\n  plan,\n  executionTime,\n  defaultExpanded = false,\n  expanded: controlledExpanded,\n  onExpandedChange,\n  className,\n}: ReasoningPanelProps) {\n  const [localExpanded, setLocalExpanded] = useState(defaultExpanded);\n\n  const isExpanded = controlledExpanded ?? localExpanded;\n  const setExpanded = (value: boolean) => {\n    setLocalExpanded(value);\n    onExpandedChange?.(value);\n  };\n\n  // Convert streaming chunks to Events\n  const streamingEvents = useMemo(() => {\n    if (isStreaming) {\n      return chunks\n        .map((chunk, index) => convertChunkToEvent(chunk, index))\n        .filter((event): event is Event => event !== null);\n    }\n    return [];\n  }, [isStreaming, chunks]);\n\n  // Aggregate plan data from planning chunks and subtask chunks\n  const aggregatedPlanData = useMemo(() => {\n    if (!isStreaming) return null;\n\n    // Find the chunk with plan data\n    const planningChunk = chunks.find((c) => c.planData !== undefined);\n    if (!planningChunk?.planData) {\n      return null;\n    }\n\n    // Clone the plan data\n    const planClone = { ...planningChunk.planData };\n    const subtasks = [...(planClone.subtasks || [])];\n\n    // Update subtask statuses from subtask chunks\n    let completedCount = 0;\n    let failedCount = 0;\n\n    chunks.forEach((chunk) => {\n      if (chunk.type === \"subtask\" && chunk.subtaskId !== undefined) {\n        const subtaskIndex = subtasks.findIndex((st) => st.id === chunk.subtaskId);\n        if (subtaskIndex !== -1) {\n          const subtask = { ...subtasks[subtaskIndex] };\n\n          if (chunk.content.includes(\" Completed\")) {\n            subtask.status = \"completed\";\n            if (chunk.subtaskData?.execution_time) {\n              subtask.execution_time = chunk.subtaskData.execution_time;\n            }\n            completedCount++;\n          } else if (chunk.content.includes(\" Failed\")) {\n            subtask.status = \"failed\";\n            const errorMatch = chunk.content.match(/ Failed: (.*)/);\n            if (errorMatch) {\n              subtask.error = errorMatch[1];\n            }\n            failedCount++;\n          } else if (chunk.content.includes(\" **Subtask\")) {\n            subtask.status = \"running\";\n          }\n\n          subtasks[subtaskIndex] = subtask;\n        }\n      }\n    });\n\n    planClone.subtasks = subtasks;\n    planClone.completed_subtasks = completedCount;\n    planClone.failed_subtasks = failedCount;\n    planClone.progress_percentage = (completedCount / planClone.total_subtasks) * 100;\n\n    return planClone;\n  }, [isStreaming, chunks]);\n\n  // Calculate total execution time\n  const totalExecutionTime = useMemo(() => {\n    if (!isStreaming && plan?.subtasks) {\n      return plan.subtasks.reduce((sum, st) => sum + (st.execution_time || 0), 0);\n    }\n    return executionTime || 0;\n  }, [isStreaming, plan, executionTime]);\n\n  // Don't render if no content\n  if (!isStreaming && chunks.length === 0 && !plan) {\n    return null;\n  }\n\n  // Get the last chunk for status display\n  const lastChunk = chunks.length > 0 ? chunks[chunks.length - 1] : null;\n  const isToolAction = lastChunk?.type === \"tool\" || lastChunk?.toolName;\n  const isPlanningAction = lastChunk?.type === \"planning\";\n\n  // Determine chip label\n  const getChipLabel = () => {\n    if (!isStreaming && totalExecutionTime > 0) {\n      return `Thought for ${formatDuration(totalExecutionTime)}`;\n    }\n\n    if (lastChunk?.toolDescription) return lastChunk.toolDescription;\n    if (lastChunk?.toolName) return lastChunk.toolName;\n\n    switch (lastChunk?.type) {\n      case \"planning\":\n        return \"Planning...\";\n      case \"thinking\":\n        return \"Thinking...\";\n      case \"tool\":\n        return lastChunk.toolName || \"Using tool...\";\n      case \"subtask\":\n        return `Executing subtask ${lastChunk.subtaskId || \"\"}...`;\n      default:\n        return \"Processing...\";\n    }\n  };\n\n  // Determine chip icon\n  const getChipIcon = () => {\n    if (isToolAction) {\n      return <Wrench size={14} />;\n    }\n    if (isPlanningAction) {\n      return <ListTodo size={14} />;\n    }\n    return <Sparkle size={14} />;\n  };\n\n  // Determine which timeline to show\n  const shouldShowPlanTimeline = (planData: PlanData | null | undefined) => {\n    if (!planData?.subtasks) return false;\n    // Show plan timeline only for multi-step plans (2+ subtasks)\n    return planData.subtasks.length >= 2;\n  };\n\n  const activePlan = isStreaming ? aggregatedPlanData : plan;\n  const showPlanTimeline = shouldShowPlanTimeline(activePlan);\n\n  return (\n    <div className={cn(\"max-w-full\", className)}>\n      {/* Collapsible chip header */}\n      <button\n        onClick={() => setExpanded(!isExpanded)}\n        className={cn(\n          \"inline-flex items-center gap-1.5 px-3 py-1.5\",\n          \"text-sm rounded-full\",\n          \"bg-[var(--chat-panel-bg)] text-[var(--chat-text-subtle)]\",\n          \"hover:bg-[var(--chat-panel-border)]\",\n          \"transition-all duration-200\",\n          \"cursor-pointer\",\n          isStreaming && \"relative overflow-hidden\",\n          !isStreaming && \"opacity-60 hover:opacity-100\"\n        )}\n      >\n        {/* Scanning animation for streaming */}\n        {isStreaming && (\n          <div className=\"absolute inset-0 animate-scanning bg-gradient-to-r from-transparent via-white/30 to-transparent\" />\n        )}\n\n        <span className=\"text-[var(--chat-text-subtle)] relative z-10\">\n          {getChipIcon()}\n        </span>\n        <span className=\"relative z-10\">{getChipLabel()}</span>\n        <span className=\"relative z-10 text-[var(--chat-text-subtle)]\">\n          {isExpanded ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\n        </span>\n      </button>\n\n      {/* Expanded content */}\n      {isExpanded && (\n        <div className=\"mt-3 animate-fade-in\">\n          {showPlanTimeline && activePlan ? (\n            <PlanTimeline plan={activePlan} streamingChunks={chunks} />\n          ) : (\n            <EventTimeline events={streamingEvents} />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { forwardRef } from \"react\";\nimport {\n  SuggestedActions as SuggestedActionsPrimitive,\n  ActionButton as ActionButtonPrimitive,\n} from \"../primitives\";\nimport { cn } from \"../utils/cn\";\nimport type { SuggestedAction } from \"../types\";\n\nexport interface SuggestedActionsProps {\n  /** List of suggested actions */\n  actions: SuggestedAction[];\n  /** Callback when an action is selected */\n  onSelect?: (action: SuggestedAction) => void;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled SuggestedActions with chip-style buttons.\n */\nexport const SuggestedActions = forwardRef<HTMLDivElement, SuggestedActionsProps>(\n  ({ actions, onSelect, className }, ref) => {\n    if (actions.length === 0) {\n      return null;\n    }\n\n    const handleSelect = onSelect || (() => {});\n\n    return (\n      <SuggestedActionsPrimitive\n        ref={ref}\n        actions={actions}\n        onSelect={handleSelect}\n        className={cn(\"flex flex-wrap gap-2\", className)}\n      >\n        {actions.map((action) => (\n          <ActionButtonPrimitive\n            key={action.id}\n            action={action}\n            className={cn(\n              \"px-3 py-1.5 rounded-button\",\n              \"text-sm font-medium\",\n              \"border border-chat-border\",\n              \"bg-white dark:bg-gray-800\",\n              \"text-chat-text\",\n              \"hover:border-chat-border-hover hover:bg-chat-panel-bg\",\n              \"transition-all duration-200\",\n              \"focus:outline-none focus:ring-2 focus:ring-primary/20\"\n            )}\n          />\n        ))}\n      </SuggestedActionsPrimitive>\n    );\n  }\n);\n\nSuggestedActions.displayName = \"SuggestedActions\";\n","import { forwardRef } from \"react\";\nimport {\n  Message as MessagePrimitive,\n  MessageContent as MessageContentPrimitive,\n} from \"../primitives\";\nimport { Avatar } from \"./Avatar\";\nimport { MarkdownContent } from \"./MarkdownContent\";\nimport { LoadingDots } from \"./LoadingDots\";\nimport { ReasoningPanel } from \"./ReasoningPanel\";\nimport { SuggestedActions } from \"./SuggestedActions\";\nimport { cn } from \"../utils/cn\";\nimport type { MessageData, ParticipantRole, StreamingChunk, SuggestedAction } from \"../types\";\n\nexport interface MessageProps {\n  /** The message data */\n  message: MessageData;\n  /** The viewer's role (determines alignment) */\n  viewerRole?: ParticipantRole;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show avatar */\n  showAvatar?: boolean;\n  /** Whether to show timestamp */\n  showTimestamp?: boolean;\n  /** Whether to render content as markdown */\n  renderMarkdown?: boolean;\n  /** Streaming chunks for reasoning panel */\n  reasoning?: StreamingChunk[];\n  /** Suggested actions */\n  suggestedActions?: SuggestedAction[];\n  /** Callback when suggested action is selected */\n  onSuggestedAction?: (action: SuggestedAction) => void;\n  /** Whether reasoning panel is expanded */\n  reasoningExpanded?: boolean;\n  /** Callback when reasoning panel expansion changes */\n  onReasoningExpandedChange?: (expanded: boolean) => void;\n}\n\n/**\n * Styled Message component with grid layout matching the main app.\n * Uses grid to align avatar and content, with reasoning above content.\n */\nexport const Message = forwardRef<HTMLDivElement, MessageProps>(\n  (\n    {\n      message,\n      viewerRole = \"user\",\n      className,\n      showAvatar = true,\n      showTimestamp = true,\n      renderMarkdown = true,\n      reasoning,\n      suggestedActions,\n      onSuggestedAction,\n      reasoningExpanded,\n      onReasoningExpandedChange,\n    },\n    ref\n  ) => {\n    const isViewer = message.participant?.role === viewerRole;\n    const isAssistant = message.participant?.role === \"assistant\";\n    const isStreaming = message.isStreaming;\n\n    // Filter reasoning chunks for display\n    const reasoningChunks = reasoning?.filter(\n      (c) =>\n        c.type === \"thinking\" ||\n        c.type === \"tool\" ||\n        c.type === \"observation\" ||\n        c.type === \"planning\" ||\n        c.type === \"subtask\"\n    );\n    const hasReasoning = reasoningChunks && reasoningChunks.length > 0;\n\n    // Check if waiting for content\n    const isWaitingForContent = isStreaming && !message.textContent && !hasReasoning;\n\n    return (\n      <MessagePrimitive\n        ref={ref}\n        message={message}\n        viewerRole={viewerRole}\n        className={cn(\"w-full animate-fade-in\", className)}\n      >\n        <div\n          className=\"grid items-start gap-x-2 gap-y-1\"\n          style={{\n            gridTemplateColumns: isViewer ? \"1fr auto\" : \"auto 1fr\",\n          }}\n        >\n          {/* Loading indicator when waiting */}\n          {isWaitingForContent && (\n            <div\n              className={cn(\n                \"max-w-[80%]\",\n                isViewer ? \"col-start-1 justify-self-end\" : \"col-start-2 justify-self-start\"\n              )}\n            >\n              <div\n                className={cn(\n                  \"px-4 py-3 rounded-lg\",\n                  \"bg-[var(--chat-message-bg)] border border-[var(--chat-border)]\"\n                )}\n              >\n                <LoadingDots size=\"small\" />\n              </div>\n            </div>\n          )}\n\n          {/* Reasoning Panel - before content for assistant */}\n          {hasReasoning && isAssistant && (\n            <div\n              className={cn(\n                \"max-w-[80%]\",\n                isViewer ? \"col-start-1 justify-self-end\" : \"col-start-2 justify-self-start\"\n              )}\n            >\n              <ReasoningPanel\n                isStreaming={isStreaming}\n                chunks={reasoningChunks}\n                expanded={reasoningExpanded}\n                onExpandedChange={onReasoningExpandedChange}\n              />\n            </div>\n          )}\n\n          {/* Avatar - shown for non-viewer messages */}\n          {showAvatar && !isViewer && message.textContent && (\n            <div\n              className={cn(\n                isViewer ? \"col-start-2\" : \"col-start-1\",\n                hasReasoning ? \"row-start-auto\" : \"row-start-1\"\n              )}\n            >\n              <Avatar\n                name={message.participant?.name}\n                src={message.participant?.avatarUrl}\n                role={message.participant?.role}\n                className=\"w-10 h-10 flex-shrink-0\"\n              />\n            </div>\n          )}\n\n          {/* Avatar when only reasoning/loading (no content yet) */}\n          {showAvatar && !isViewer && !message.textContent && (hasReasoning || isWaitingForContent) && (\n            <div\n              className={cn(\n                isViewer ? \"col-start-2\" : \"col-start-1\",\n                \"row-start-1\"\n              )}\n            >\n              <Avatar\n                name={message.participant?.name}\n                src={message.participant?.avatarUrl}\n                role={message.participant?.role}\n                className=\"w-10 h-10 flex-shrink-0\"\n              />\n            </div>\n          )}\n\n          {/* Message bubble */}\n          {message.textContent && (\n            <div\n              className={cn(\n                \"max-w-[85%]\",\n                isViewer ? \"col-start-1 justify-self-end\" : \"col-start-2 justify-self-start\"\n              )}\n            >\n              <div\n                className={cn(\n                  \"px-3.5 py-2.5 rounded-lg\",\n                  \"border border-[var(--chat-border)]\",\n                  isViewer\n                    ? \"bg-[var(--chat-user-message-bg)] text-white\"\n                    : \"bg-[var(--chat-message-bg)] text-[var(--chat-text)]\",\n                  isStreaming && \"animate-pulse-subtle\"\n                )}\n              >\n                <MessageContentPrimitive>\n                  {renderMarkdown ? (\n                    <MarkdownContent className={isViewer ? \"prose-invert\" : \"\"}>\n                      {message.textContent}\n                    </MarkdownContent>\n                  ) : (\n                    <p className=\"whitespace-pre-wrap\">{message.textContent}</p>\n                  )}\n                </MessageContentPrimitive>\n\n                {/* Timestamp */}\n                {showTimestamp && !isStreaming && message.createdAt && (\n                  <MessageTimestamp\n                    createdAt={typeof message.createdAt === 'string' ? message.createdAt : message.createdAt.toISOString()}\n                    isViewer={isViewer}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Suggested actions */}\n          {suggestedActions && suggestedActions.length > 0 && !isStreaming && (\n            <div\n              className={cn(\n                \"max-w-[80%]\",\n                isViewer ? \"col-start-1 justify-self-end\" : \"col-start-2 justify-self-start\"\n              )}\n            >\n              <SuggestedActions\n                actions={suggestedActions}\n                onSelect={onSuggestedAction}\n              />\n            </div>\n          )}\n        </div>\n      </MessagePrimitive>\n    );\n  }\n);\n\nMessage.displayName = \"Message\";\n\nfunction MessageTimestamp({\n  createdAt,\n  isViewer,\n}: {\n  createdAt: string;\n  isViewer: boolean;\n}) {\n  const formatTime = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n    } catch {\n      return \"\";\n    }\n  };\n\n  return (\n    <span\n      className={cn(\n        \"text-xs mt-1 block\",\n        isViewer ? \"text-white/60\" : \"text-[var(--chat-text-subtle)]\"\n      )}\n    >\n      {formatTime(createdAt)}\n    </span>\n  );\n}\n\nexport { useMessage } from \"../primitives\";\n","import { forwardRef } from \"react\";\nimport { Send } from \"lucide-react\";\nimport {\n  MessageComposer as ComposerPrimitive,\n  ComposerInput,\n  ComposerSubmit,\n  useComposer,\n} from \"../primitives\";\nimport { cn } from \"../utils/cn\";\n\nexport interface MessageComposerProps {\n  /** Callback when message is submitted */\n  onSubmit: (content: string, attachments?: File[]) => Promise<void>;\n  /** Whether the composer is disabled */\n  disabled?: boolean;\n  /** Placeholder text */\n  placeholder?: string;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled MessageComposer with input and send button.\n */\nexport const MessageComposer = forwardRef<HTMLFormElement, MessageComposerProps>(\n  ({ onSubmit, disabled = false, placeholder = \"Type a message...\", className }, ref) => {\n    return (\n      <ComposerPrimitive\n        ref={ref}\n        onSubmit={onSubmit}\n        disabled={disabled}\n        className={cn(\n          \"sticky bottom-0 p-4\",\n          \"border-t border-chat-border\",\n          \"bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm\",\n          className\n        )}\n      >\n        <ComposerContent placeholder={placeholder} disabled={disabled} />\n      </ComposerPrimitive>\n    );\n  }\n);\n\nMessageComposer.displayName = \"MessageComposer\";\n\nfunction ComposerContent({\n  placeholder,\n  disabled,\n}: {\n  placeholder: string;\n  disabled: boolean;\n}) {\n  const { isSubmitting } = useComposer();\n\n  return (\n    <div\n      className={cn(\n        \"flex items-end gap-2\",\n        \"bg-white dark:bg-gray-800\",\n        \"border border-chat-border rounded-input\",\n        \"p-2\",\n        \"shadow-input\",\n        \"focus-within:shadow-input-focus focus-within:border-chat-border-hover\",\n        \"transition-all duration-200\"\n      )}\n    >\n      <ComposerInput\n        placeholder={placeholder}\n        disabled={disabled || isSubmitting}\n        className={cn(\n          \"flex-1 resize-none\",\n          \"min-h-[40px] max-h-[200px]\",\n          \"px-2 py-2\",\n          \"bg-transparent\",\n          \"text-chat-text placeholder:text-chat-subtle\",\n          \"focus:outline-none\",\n          \"disabled:opacity-50\"\n        )}\n        rows={1}\n      />\n      <ComposerSubmit\n        disabled={disabled}\n        className={cn(\n          \"flex-shrink-0\",\n          \"w-10 h-10 rounded-button\",\n          \"flex items-center justify-center\",\n          \"bg-primary text-white\",\n          \"shadow-button\",\n          \"hover:shadow-button-hover hover:brightness-110\",\n          \"disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-button\",\n          \"transition-all duration-200\"\n        )}\n      >\n        <Send className=\"w-5 h-5\" />\n      </ComposerSubmit>\n    </div>\n  );\n}\n\nexport { useComposer } from \"../primitives\";\n","import { forwardRef } from \"react\";\nimport { TypingIndicator as TypingIndicatorPrimitive } from \"../primitives\";\nimport { cn } from \"../utils/cn\";\n\nexport interface TypingIndicatorProps {\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled TypingIndicator with animated dots.\n */\nexport const TypingIndicator = forwardRef<HTMLDivElement, TypingIndicatorProps>(\n  ({ className }, ref) => {\n    return (\n      <TypingIndicatorPrimitive\n        ref={ref}\n        className={cn(\n          \"inline-flex items-center gap-1\",\n          \"px-4 py-3 rounded-message\",\n          \"bg-chat-message-bg\",\n          className\n        )}\n      >\n        <span className=\"flex gap-1\">\n          {[0, 1, 2].map((i) => (\n            <span\n              key={i}\n              className={cn(\n                \"w-2 h-2 rounded-full bg-chat-subtle\",\n                \"animate-typing\"\n              )}\n              style={{\n                animationDelay: `${i * 0.2}s`,\n              }}\n            />\n          ))}\n        </span>\n      </TypingIndicatorPrimitive>\n    );\n  }\n);\n\nTypingIndicator.displayName = \"TypingIndicator\";\n","import { forwardRef } from \"react\";\nimport { StreamingText as StreamingTextPrimitive } from \"../primitives\";\nimport { MarkdownContent } from \"./MarkdownContent\";\nimport { cn } from \"../utils/cn\";\n\nexport interface StreamingTextProps {\n  /** The content to display */\n  content: string;\n  /** Whether the text is currently streaming */\n  isStreaming?: boolean;\n  /** Whether to render as markdown */\n  renderMarkdown?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Styled StreamingText with cursor animation.\n */\nexport const StreamingText = forwardRef<HTMLDivElement, StreamingTextProps>(\n  ({ content, isStreaming = false, renderMarkdown = true, className }, ref) => {\n    return (\n      <StreamingTextPrimitive\n        ref={ref}\n        content={content}\n        isStreaming={isStreaming}\n        showCursor={isStreaming}\n        className={cn(\"relative\", className)}\n        cursor={\n          <span\n            className={cn(\n              \"inline-block w-0.5 h-[1em] ml-0.5\",\n              \"bg-current align-text-bottom\",\n              \"animate-[blink_1s_step-end_infinite]\"\n            )}\n          />\n        }\n      >\n        {renderMarkdown ? (\n          <MarkdownContent>{content}</MarkdownContent>\n        ) : (\n          <span className=\"whitespace-pre-wrap\">{content}</span>\n        )}\n      </StreamingTextPrimitive>\n    );\n  }\n);\n\nStreamingText.displayName = \"StreamingText\";\n","import { forwardRef } from \"react\";\nimport { X, FileText, Image as ImageIcon, File as FileIcon } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport type { Attachment } from \"../types\";\n\nexport interface AttachmentPreviewProps {\n  /** The attachment to preview */\n  attachment: Attachment;\n  /** Callback when remove button is clicked */\n  onRemove?: () => void;\n  /** Whether removal is allowed */\n  removable?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nfunction getFileIcon(mimeType: string) {\n  if (mimeType.startsWith(\"image/\")) {\n    return ImageIcon;\n  }\n  if (\n    mimeType === \"application/pdf\" ||\n    mimeType.startsWith(\"text/\")\n  ) {\n    return FileText;\n  }\n  return FileIcon;\n}\n\nfunction formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / 1024 / 1024).toFixed(1)} MB`;\n}\n\n/**\n * Styled attachment preview card.\n */\nexport const AttachmentPreview = forwardRef<HTMLDivElement, AttachmentPreviewProps>(\n  ({ attachment, onRemove, removable = true, className }, ref) => {\n    const Icon = getFileIcon(attachment.mimeType);\n    const isImage = attachment.mimeType.startsWith(\"image/\");\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative group\",\n          \"flex items-center gap-2\",\n          \"p-2 rounded-lg\",\n          \"border border-chat-border\",\n          \"bg-chat-panel-bg\",\n          className\n        )}\n      >\n        {/* Preview or Icon */}\n        <div\n          className={cn(\n            \"w-10 h-10 rounded\",\n            \"flex items-center justify-center\",\n            \"bg-gray-100 dark:bg-gray-800\",\n            \"overflow-hidden flex-shrink-0\"\n          )}\n        >\n          {isImage && attachment.previewUrl ? (\n            <img\n              src={attachment.previewUrl}\n              alt={attachment.filename}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <Icon className=\"w-5 h-5 text-chat-subtle\" />\n          )}\n        </div>\n\n        {/* File info */}\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium truncate text-chat-text\">\n            {attachment.filename}\n          </p>\n          <p className=\"text-xs text-chat-subtle\">\n            {formatFileSize(attachment.size)}\n          </p>\n        </div>\n\n        {/* Remove button */}\n        {removable && onRemove && (\n          <button\n            type=\"button\"\n            onClick={onRemove}\n            className={cn(\n              \"absolute -top-1.5 -right-1.5\",\n              \"w-5 h-5 rounded-full\",\n              \"flex items-center justify-center\",\n              \"bg-gray-500 text-white\",\n              \"opacity-0 group-hover:opacity-100\",\n              \"hover:bg-gray-600\",\n              \"transition-opacity duration-200\"\n            )}\n            aria-label={`Remove ${attachment.filename}`}\n          >\n            <X className=\"w-3 h-3\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n);\n\nAttachmentPreview.displayName = \"AttachmentPreview\";\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { MoreVertical, X } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\n\nexport interface ChatHeaderAction {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n}\n\nexport interface ChatHeaderProps {\n  /** Assistant/chat title */\n  title: string;\n  /** Optional subtitle/description */\n  subtitle?: string;\n  /** Logo URL or element */\n  logo?: string | React.ReactNode;\n  /** Menu actions */\n  actions?: ChatHeaderAction[];\n  /** Show close button */\n  showClose?: boolean;\n  /** Close button handler */\n  onClose?: () => void;\n  /** Loading state */\n  loading?: boolean;\n  /** Additional class names */\n  className?: string;\n  /** Custom styles via CSS variables */\n  style?: React.CSSProperties;\n}\n\nexport function ChatHeader({\n  title,\n  subtitle,\n  logo,\n  actions,\n  showClose,\n  onClose,\n  loading,\n  className,\n  style,\n}: ChatHeaderProps) {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        menuRef.current &&\n        !menuRef.current.contains(event.target as Node) &&\n        buttonRef.current &&\n        !buttonRef.current.contains(event.target as Node)\n      ) {\n        setMenuOpen(false);\n      }\n    };\n\n    if (menuOpen) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n  }, [menuOpen]);\n\n  return (\n    <header\n      className={cn(\n        \"flex items-center justify-between gap-3\",\n        \"px-4 py-3\",\n        \"border-b border-[var(--chat-border)]\",\n        \"bg-[var(--chat-header-bg,#ffffff)]\",\n        className\n      )}\n      style={style}\n    >\n      {/* Left section: Logo and title */}\n      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n        {/* Logo */}\n        {logo && (\n          <div className=\"flex-shrink-0\">\n            {typeof logo === \"string\" ? (\n              <img\n                src={logo}\n                alt=\"\"\n                className=\"w-10 h-10 rounded-lg object-contain\"\n              />\n            ) : (\n              logo\n            )}\n          </div>\n        )}\n\n        {/* Title and subtitle */}\n        <div className=\"flex flex-col min-w-0\">\n          {loading ? (\n            <div className=\"h-5 w-24 bg-gray-200 rounded animate-pulse\" />\n          ) : (\n            <h1 className=\"text-lg font-semibold text-[var(--chat-text)] truncate\">\n              {title}\n            </h1>\n          )}\n          {subtitle && (\n            <p className=\"text-sm text-[var(--chat-text-subtle)] truncate\">\n              {subtitle}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Right section: Actions */}\n      <div className=\"flex items-center gap-1 flex-shrink-0\">\n        {/* Menu button */}\n        {actions && actions.length > 0 && (\n          <div className=\"relative\">\n            <button\n              ref={buttonRef}\n              onClick={() => setMenuOpen(!menuOpen)}\n              className={cn(\n                \"p-2 rounded-lg\",\n                \"text-[var(--chat-text-subtle)]\",\n                \"hover:bg-[var(--chat-panel-bg)] hover:text-[var(--chat-text)]\",\n                \"transition-colors duration-200\"\n              )}\n              aria-label=\"Menu\"\n              aria-expanded={menuOpen}\n            >\n              <MoreVertical size={18} />\n            </button>\n\n            {/* Dropdown menu */}\n            {menuOpen && (\n              <div\n                ref={menuRef}\n                className={cn(\n                  \"absolute right-0 top-full mt-1 z-50\",\n                  \"min-w-[180px]\",\n                  \"bg-white rounded-lg shadow-lg\",\n                  \"border border-[var(--chat-border)]\",\n                  \"py-1\",\n                  \"animate-fade-in\"\n                )}\n              >\n                {actions.map((action) => (\n                  <button\n                    key={action.id}\n                    onClick={() => {\n                      action.onClick();\n                      setMenuOpen(false);\n                    }}\n                    disabled={action.disabled}\n                    className={cn(\n                      \"w-full flex items-center gap-2 px-3 py-2\",\n                      \"text-sm text-left\",\n                      \"text-[var(--chat-text)]\",\n                      \"hover:bg-[var(--chat-panel-bg)]\",\n                      \"disabled:opacity-50 disabled:cursor-not-allowed\",\n                      \"transition-colors duration-150\"\n                    )}\n                  >\n                    {action.icon && (\n                      <span className=\"flex-shrink-0 text-[var(--chat-text-subtle)]\">\n                        {action.icon}\n                      </span>\n                    )}\n                    {action.label}\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Close button */}\n        {showClose && onClose && (\n          <button\n            onClick={onClose}\n            className={cn(\n              \"p-2 rounded-lg\",\n              \"text-[var(--chat-text-subtle)]\",\n              \"hover:bg-[var(--chat-panel-bg)] hover:text-[var(--chat-text)]\",\n              \"transition-colors duration-200\"\n            )}\n            aria-label=\"Close\"\n          >\n            <X size={18} />\n          </button>\n        )}\n      </div>\n    </header>\n  );\n}\n","import { useState } from \"react\";\nimport { Download, FileIcon, FileText, Image as ImageIcon, Video, X } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport type { Attachment } from \"../types\";\n\nexport interface MessageAttachmentsProps {\n  /** List of attachments to display */\n  attachments: Attachment[];\n  /** Custom download handler */\n  onDownload?: (attachment: Attachment) => void;\n  /** Custom preview handler */\n  onPreview?: (attachment: Attachment) => void;\n  /** Additional class names */\n  className?: string;\n}\n\n/**\n * Display attachments (images, videos, documents) in messages\n */\nexport function MessageAttachments({\n  attachments,\n  onDownload,\n  onPreview,\n  className,\n}: MessageAttachmentsProps) {\n  const [lightboxUrl, setLightboxUrl] = useState<string | null>(null);\n\n  if (!attachments || attachments.length === 0) {\n    return null;\n  }\n\n  const handleDownload = (attachment: Attachment) => {\n    if (onDownload) {\n      onDownload(attachment);\n      return;\n    }\n\n    // Default download behavior\n    if (attachment.url) {\n      const link = document.createElement(\"a\");\n      link.href = attachment.url;\n      link.download = attachment.filename;\n      link.target = \"_blank\";\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  };\n\n  const handlePreview = (attachment: Attachment) => {\n    if (onPreview) {\n      onPreview(attachment);\n      return;\n    }\n\n    // Default preview for images\n    if (attachment.isImage && attachment.url) {\n      setLightboxUrl(attachment.url);\n    }\n  };\n\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      {attachments.map((attachment) => (\n        <AttachmentCard\n          key={attachment.id}\n          attachment={attachment}\n          onDownload={() => handleDownload(attachment)}\n          onPreview={() => handlePreview(attachment)}\n        />\n      ))}\n\n      {/* Image lightbox */}\n      {lightboxUrl && (\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80\"\n          onClick={() => setLightboxUrl(null)}\n        >\n          <button\n            className=\"absolute top-4 right-4 p-2 text-white hover:bg-white/20 rounded-full transition-colors\"\n            onClick={() => setLightboxUrl(null)}\n            aria-label=\"Close\"\n          >\n            <X size={24} />\n          </button>\n          <img\n            src={lightboxUrl}\n            alt=\"Preview\"\n            className=\"max-w-[90vw] max-h-[90vh] object-contain\"\n            onClick={(e) => e.stopPropagation()}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction AttachmentCard({\n  attachment,\n  onDownload,\n  onPreview,\n}: {\n  attachment: Attachment;\n  onDownload: () => void;\n  onPreview: () => void;\n}) {\n  // Image attachment\n  if (attachment.isImage && attachment.url) {\n    return (\n      <div className=\"rounded-lg border border-[var(--chat-border)] overflow-hidden\">\n        <div\n          className=\"relative h-48 cursor-pointer hover:opacity-80 transition-opacity\"\n          onClick={onPreview}\n        >\n          <img\n            src={attachment.previewUrl || attachment.url}\n            alt={attachment.filename}\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n        <div className=\"flex items-center justify-between px-3 py-2 bg-[var(--chat-panel-bg)]\">\n          <div className=\"flex items-center gap-2 min-w-0\">\n            <ImageIcon size={16} className=\"text-[var(--chat-primary)] flex-shrink-0\" />\n            <span className=\"text-sm text-[var(--chat-text)] truncate\">\n              {attachment.filename}\n            </span>\n          </div>\n          <button\n            onClick={onDownload}\n            className=\"p-1.5 hover:bg-[var(--chat-border)] rounded transition-colors flex-shrink-0\"\n            aria-label=\"Download\"\n          >\n            <Download size={16} className=\"text-[var(--chat-text-subtle)]\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Video attachment\n  if (attachment.isVideo && attachment.url) {\n    return (\n      <div className=\"rounded-lg border border-[var(--chat-border)] overflow-hidden\">\n        <video\n          src={attachment.url}\n          controls\n          className=\"w-full h-48 object-cover\"\n        />\n        <div className=\"flex items-center justify-between px-3 py-2 bg-[var(--chat-panel-bg)]\">\n          <div className=\"flex items-center gap-2 min-w-0\">\n            <Video size={16} className=\"text-[var(--chat-primary)] flex-shrink-0\" />\n            <span className=\"text-sm text-[var(--chat-text)] truncate\">\n              {attachment.filename}\n            </span>\n          </div>\n          <button\n            onClick={onDownload}\n            className=\"p-1.5 hover:bg-[var(--chat-border)] rounded transition-colors flex-shrink-0\"\n            aria-label=\"Download\"\n          >\n            <Download size={16} className=\"text-[var(--chat-text-subtle)]\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Document/file attachment\n  return (\n    <div className=\"flex items-center gap-3 p-3 rounded-lg border border-[var(--chat-border)] bg-[var(--chat-panel-bg)]\">\n      <div className=\"flex-shrink-0 w-10 h-10 flex items-center justify-center bg-gray-100 rounded-lg\">\n        <FileTypeIcon mimeType={attachment.mimeType} />\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm text-[var(--chat-text)] truncate\">\n          {attachment.filename}\n        </p>\n        <p className=\"text-xs text-[var(--chat-text-subtle)]\">\n          {attachment.humanReadableSize || formatFileSize(attachment.size)}\n        </p>\n      </div>\n      <button\n        onClick={onDownload}\n        className=\"p-2 hover:bg-[var(--chat-border)] rounded-lg transition-colors flex-shrink-0\"\n        aria-label=\"Download\"\n      >\n        <Download size={18} className=\"text-[var(--chat-text-subtle)]\" />\n      </button>\n    </div>\n  );\n}\n\nfunction FileTypeIcon({ mimeType }: { mimeType: string }) {\n  if (mimeType.startsWith(\"image/\")) {\n    return <ImageIcon size={20} className=\"text-[var(--chat-primary)]\" />;\n  }\n  if (mimeType.startsWith(\"video/\")) {\n    return <Video size={20} className=\"text-[var(--chat-primary)]\" />;\n  }\n  if (mimeType === \"application/pdf\") {\n    return <FileText size={20} className=\"text-red-500\" />;\n  }\n  return <FileIcon size={20} className=\"text-gray-500\" />;\n}\n\nfunction formatFileSize(bytes: number): string {\n  if (bytes === 0) return \"0 Bytes\";\n  const k = 1024;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\n"]}