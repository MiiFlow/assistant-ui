{"version":3,"sources":["../src/context/ChatProvider.tsx"],"names":["ChatContext","createContext","ChatProvider","children","messages","isStreaming","streamingMessageId","viewerRole","onSendMessage","onStopStreaming","onRetryLastMessage","customData","sendMessage","useCallback","content","attachments","value","useMemo","jsx","useChatContext","context","useContext"],"mappings":"qGA4BA,IAAMA,CAAAA,CAAcC,aAAAA,CAAuC,IAAI,EAcxD,SAASC,CAAAA,CAAa,CAC3B,QAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CAAc,KAAA,CACd,kBAAA,CAAAC,CAAAA,CAAqB,KACrB,UAAA,CAAAC,CAAAA,CAAa,MAAA,CACb,aAAA,CAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CACF,CAAA,CAAsB,CACpB,IAAMC,CAAAA,CAAcC,WAAAA,CAClB,MAAOC,CAAAA,CAAiBC,CAAAA,GAAyB,CAC/C,MAAMP,CAAAA,CAAcM,CAAAA,CAASC,CAAW,EAC1C,CAAA,CACA,CAACP,CAAa,CAChB,CAAA,CAEMQ,EAAQC,OAAAA,CACZ,KAAO,CACL,QAAA,CAAAb,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,WAAA,CAAAK,CAAAA,CACA,aAAA,CAAeH,CAAAA,CACf,gBAAA,CAAkBC,CAAAA,CAClB,UAAA,CAAAC,CACF,CAAA,CAAA,CACA,CACEP,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAK,CAAAA,CACAH,CAAAA,CACAC,CAAAA,CACAC,CACF,CACF,EAEA,OAAOO,GAAAA,CAAClB,CAAAA,CAAY,QAAA,CAAZ,CAAqB,KAAA,CAAOgB,CAAAA,CAAQ,QAAA,CAAAb,CAAAA,CAAS,CACvD,CAEO,SAASgB,CAAAA,EAAiB,CAC/B,IAAMC,CAAAA,CAAUC,UAAAA,CAAWrB,CAAW,CAAA,CACtC,GAAI,CAACoB,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,mDAAmD,CAAA,CAErE,OAAOA,CACT","file":"chunk-NUTKTRYZ.mjs","sourcesContent":["import {\n  createContext,\n  useContext,\n  useCallback,\n  useMemo,\n  type ReactNode,\n} from \"react\";\nimport type { ChatMessage, ParticipantRole } from \"../types\";\n\nexport interface ChatContextValue {\n  /** List of messages in the conversation */\n  messages: ChatMessage[];\n  /** Whether a message is currently being streamed */\n  isStreaming: boolean;\n  /** ID of the message currently being streamed */\n  streamingMessageId: string | null;\n  /** The viewer's role (determines message alignment) */\n  viewerRole: ParticipantRole;\n  /** Send a new message */\n  sendMessage: (content: string, attachments?: File[]) => Promise<void>;\n  /** Stop the current streaming response */\n  stopStreaming?: () => void;\n  /** Retry the last failed message */\n  retryLastMessage?: () => Promise<void>;\n  /** Custom data passed through context */\n  customData?: Record<string, unknown>;\n}\n\nconst ChatContext = createContext<ChatContextValue | null>(null);\n\nexport interface ChatProviderProps {\n  children: ReactNode;\n  messages: ChatMessage[];\n  isStreaming?: boolean;\n  streamingMessageId?: string | null;\n  viewerRole?: ParticipantRole;\n  onSendMessage: (content: string, attachments?: File[]) => Promise<void>;\n  onStopStreaming?: () => void;\n  onRetryLastMessage?: () => Promise<void>;\n  customData?: Record<string, unknown>;\n}\n\nexport function ChatProvider({\n  children,\n  messages,\n  isStreaming = false,\n  streamingMessageId = null,\n  viewerRole = \"user\",\n  onSendMessage,\n  onStopStreaming,\n  onRetryLastMessage,\n  customData,\n}: ChatProviderProps) {\n  const sendMessage = useCallback(\n    async (content: string, attachments?: File[]) => {\n      await onSendMessage(content, attachments);\n    },\n    [onSendMessage]\n  );\n\n  const value = useMemo<ChatContextValue>(\n    () => ({\n      messages,\n      isStreaming,\n      streamingMessageId,\n      viewerRole,\n      sendMessage,\n      stopStreaming: onStopStreaming,\n      retryLastMessage: onRetryLastMessage,\n      customData,\n    }),\n    [\n      messages,\n      isStreaming,\n      streamingMessageId,\n      viewerRole,\n      sendMessage,\n      onStopStreaming,\n      onRetryLastMessage,\n      customData,\n    ]\n  );\n\n  return <ChatContext.Provider value={value}>{children}</ChatContext.Provider>;\n}\n\nexport function useChatContext() {\n  const context = useContext(ChatContext);\n  if (!context) {\n    throw new Error(\"useChatContext must be used within a ChatProvider\");\n  }\n  return context;\n}\n\nexport { ChatContext };\n"]}