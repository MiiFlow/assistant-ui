import {useState,useRef,useCallback}from'react';function A(r={}){let[c,i]=useState({isStreaming:false,streamingMessageId:null,streamedContent:""}),n=useRef(null),m=useCallback(e=>{i({isStreaming:true,streamingMessageId:e,streamedContent:""}),n.current=new AbortController;},[]),d=useCallback(e=>{e.type==="content"&&e.content&&i(u=>({...u,streamedContent:u.streamedContent+e.content})),r.onChunk?.(e);},[r]),p=useCallback(()=>{n.current?.abort();let e=c.streamedContent;i({isStreaming:false,streamingMessageId:null,streamedContent:""}),r.onComplete?.(e);},[c.streamedContent,r]),f=useCallback(e=>{n.current?.abort(),i({isStreaming:false,streamingMessageId:null,streamedContent:""}),r.onError?.(e);},[r]);return {...c,startStreaming:m,appendContent:d,stopStreaming:p,handleError:f,abortSignal:n.current?.signal}}function x({maxCount:r=5,maxFileSize:c=10*1024*1024,allowedTypes:i}={}){let[n,m]=useState([]),d=useCallback(t=>{if(n.length>=r)return {success:false,error:`Maximum ${r} attachments allowed`};if(t.size>c)return {success:false,error:`File size exceeds ${Math.round(c/1024/1024)}MB limit`};if(i&&!i.includes(t.type))return {success:false,error:`File type ${t.type} not allowed`};let o=`${Date.now()}-${Math.random().toString(36).slice(2)}`;return m(a=>[...a,{file:t,id:o,progress:0,status:"pending"}]),{success:true}},[n.length,r,c,i]),p=useCallback(t=>{m(o=>o.filter(a=>a.id!==t));},[]),f=useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,progress:o,status:o<100?"uploading":"complete"}:s));},[]),e=useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,status:"error",error:o}:s));},[]),u=useCallback((t,o)=>{m(a=>a.map(s=>s.id===t?{...s,url:o,status:"complete",progress:100}:s));},[]),S=useCallback(()=>{m([]);},[]),C=useCallback(()=>n.map(t=>t.file),[n]);return {attachments:n,addAttachment:d,removeAttachment:p,updateProgress:f,setError:e,setUrl:u,clear:S,getFiles:C,canAddMore:n.length<r}}export{A as a,x as b};//# sourceMappingURL=chunk-5CSSGIG7.mjs.map
//# sourceMappingURL=chunk-5CSSGIG7.mjs.map