import {useRef,useCallback,useEffect,useState}from'react';function K({enabled:f=true,threshold:a=100,smooth:h=true}={}){let s=useRef(null),l=useRef(true),i=useCallback(()=>{let e=s.current;if(!e)return;let{scrollTop:o,scrollHeight:d,clientHeight:g}=e,c=d-o-g;l.current=c<=a;},[a]),n=useCallback((e=false)=>{let o=s.current;o&&(e||l.current)&&o.scrollTo({top:o.scrollHeight,behavior:h?"smooth":"auto"});},[h]);return useEffect(()=>{f&&n();},[f,n]),useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scroll",i,{passive:true}),()=>e.removeEventListener("scroll",i)},[i]),{containerRef:s,scrollToBottom:n,isAtBottom:l.current}}function k({onSubmit:f,disabled:a=false,maxFileSize:h=10*1024*1024,allowedFileTypes:s}){let[l,i]=useState(""),[n,e]=useState([]),[o,d]=useState(false),[g,c]=useState(null),A=useRef(null),C=useCallback(t=>{i(t),c(null);},[]),F=useCallback(t=>{let u=Array.from(t),y=[];for(let r of u){if(r.size>h){c(`File "${r.name}" exceeds maximum size`);continue}if(s&&!s.includes(r.type)){c(`File type "${r.type}" is not allowed`);continue}y.push(r);}e(r=>[...r,...y]);},[h,s]),T=useCallback(t=>{e(u=>u.filter((y,r)=>r!==t));},[]),b=useCallback(async()=>{let t=l.trim();if(!(!t&&n.length===0||a||o)){d(true),c(null);try{await f(t,n.length>0?n:void 0),i(""),e([]),A.current?.focus();}catch(u){c(u instanceof Error?u.message:"Failed to send message");}finally{d(false);}}},[l,n,a,o,f]),x=useCallback(t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),b());},[b]),H=useCallback(()=>{i(""),e([]),c(null);},[]),L=(l.trim()||n.length>0)&&!a&&!o;return {content:l,attachments:n,isSubmitting:o,error:g,canSubmit:L,inputRef:A,handleContentChange:C,handleAddAttachment:F,handleRemoveAttachment:T,handleSubmit:b,handleKeyDown:x,clear:H}}export{K as a,k as b};//# sourceMappingURL=chunk-L5TNS56J.mjs.map
//# sourceMappingURL=chunk-L5TNS56J.mjs.map